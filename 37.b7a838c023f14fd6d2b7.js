(window.webpackJsonp=window.webpackJsonp||[]).push([[37],{ITub:function(t,r,e){"use strict";e.r(r),e.d(r,"EvaluatorsModule",function(){return R});var o=e("ofXK"),i=e("tyNb"),n=e("fXoL"),s=e("3Pt+"),a=e("KaZm"),c=e("y6im"),l=e("f4AX"),b=e("5eHb"),u=e("bcAm");function d(t,r){if(1&t){const t=n.Sb();n.Rb(0,"div",13),n.Rb(1,"a",14),n.bc("click",function(){return n.Bc(t),n.dc().toggleNew()}),n.Jc(2,"Nuevo Evaluador"),n.Qb(),n.Qb()}}function f(t,r){if(1&t&&(n.Rb(0,"option",25),n.Jc(1),n.Qb()),2&t){const t=r.$implicit;n.mc("value",t.email),n.Ab(1),n.Mc("",t.nombre," ",t.apellido," ")}}const m=function(t){return{"is-invalid":t}};function h(t,r){if(1&t){const t=n.Sb();n.Rb(0,"div",13),n.Rb(1,"form",15),n.Rb(2,"div",16),n.Rb(3,"h5",17),n.Jc(4,"Agregar Evaluador"),n.Qb(),n.Rb(5,"p",18),n.Jc(6,"Se enviar\xe1 un correo de invitaci\xf3n al usuario para que sea evaluador."),n.Qb(),n.Nb(7,"input",19),n.Rb(8,"datalist",20),n.Hc(9,f,2,3,"option",21),n.Qb(),n.Nb(10,"br"),n.Rb(11,"a",22),n.bc("click",function(){return n.Bc(t),n.dc().toggleNew()}),n.Jc(12,"Cancelar"),n.Qb(),n.Jc(13," \xa0 "),n.Rb(14,"a",23),n.bc("click",function(){return n.Bc(t),n.dc().sendMail()}),n.Jc(15,"Enviar correo \xa0 "),n.Nb(16,"i",24),n.Qb(),n.Qb(),n.Qb(),n.Qb()}if(2&t){const t=n.dc();n.Ab(1),n.lc("formGroup",t.formEvaluator),n.Ab(6),n.lc("ngClass",n.qc(3,m,t.submitted&&t.formEvaluator.controls.correo.errors)),n.Ab(2),n.lc("ngForOf",t.usersList)}}function v(t,r){if(1&t){const t=n.Sb();n.Rb(0,"tr",26),n.Rb(1,"td"),n.Jc(2),n.Qb(),n.Rb(3,"td"),n.Jc(4),n.Qb(),n.Rb(5,"td"),n.Rb(6,"a",27),n.bc("click",function(){n.Bc(t);const e=r.$implicit;return n.dc().deleteEvaluator(e)}),n.Nb(7,"i",28),n.Qb(),n.Qb(),n.Qb()}if(2&t){const t=r.$implicit;n.Ab(2),n.Kc(t.nombre),n.Ab(2),n.Kc(t.email)}}let p=(()=>{class t{constructor(t,r,e,o){this.evaluatorService=t,this.userService=r,this.formBuilder=e,this.toast=o,this.submitted=!1,this.new=!1,this.evaluatorsList=[],this.showList=[]}ngOnInit(){this.formEvaluator=this.formBuilder.group({correo:["",[s.p.required,s.p.email]]}),this.fillEvaluatorsList(),this.getUsers()}sendMail(){if(this.submitted=!0,this.formEvaluator.invalid)return;const t=this.formEvaluator.controls.correo.value,r=this.searchByEmail(t);if(null==r)return void this.toast.warning("Atenci\xf3n","El correo ingresado no pertenece a un usuario registrado.");const e=r.id.toString();this.evaluatorService.postEvaluator(e.toString()).subscribe(r=>{null!=r.data?(this.toast.success("Se envi\xf3 un correo a "+t),this.submitted=!1,this.toggleNew()):this.toast.error("Error",r.error)})}fillEvaluatorsList(){this.evaluatorService.getEvaluators(0).subscribe(t=>{this.evaluatorsList=t.data,this.showList=t.data})}searchByEmail(t){for(let r=0;r<this.usersList.length;r++)if(t===this.usersList[r].email)return this.usersList[r];return null}getUsers(){this.userService.getAllUsers().subscribe(t=>{this.usersList=t})}deleteEvaluator(t){this.toast.show("\xbfSeguro que deseas borrar al evaluador "+t.nombre+"?","Borrar Evaluador",{toastComponent:a.a,disableTimeOut:!0,tapToDismiss:!1,enableHtml:!0}).onAction.subscribe(()=>{this.evaluatorService.deleteIdEvaluator(t.idUsuario).subscribe(r=>{this.evaluatorsList=this.evaluatorsList.filter(r=>{if(r.idUsuario!==t.idUsuario)return r}),this.showList=this.evaluatorsList.slice(),this.toast.success("Evaluador Eliminado")})})}toggleNew(){this.submitted=!1,this.new=!this.new}search(t){this.showList=t}}return t.\u0275fac=function(r){return new(r||t)(n.Mb(c.a),n.Mb(l.a),n.Mb(s.b),n.Mb(b.d))},t.\u0275cmp=n.Gb({type:t,selectors:[["app-evaluator-list"]],decls:24,vars:5,consts:[[1,"container-fluid"],[1,"contenidos"],[1,"text-center"],["id","backdrop",1,"modal-backdrop","fade","show",2,"display","none"],["class","row justify-content-md-end",4,"ngIf"],[1,"row","justify-content-md-center"],[1,"col-md-8",3,"fullList","attribFilter","listEvent"],[1,"row"],[1,"table","text-center","table-hover","table-bordered"],[1,"thead"],[1,"col-md-4"],[1,"col-md-1"],["class","align-items-center",4,"ngFor","ngForOf"],[1,"row","justify-content-md-end"],["role","button",1,"btn","btn-primary","col-sm-2",3,"click"],[1,"card","col-md-4",3,"formGroup"],[1,"card-body"],[1,"card-title"],[1,"card-text"],["type","email","list","correos","placeholder","Buscar por nombre o direcci\xf3n de correo","formControlName","correo",1,"form-control",3,"ngClass"],["id","correos"],[3,"value",4,"ngFor","ngForOf"],["role","button",1,"btn","btn-secondary",3,"click"],["role","button",1,"btn","btn-primary",3,"click"],[1,"fas","fa-envelope"],[3,"value"],[1,"align-items-center"],["title","Eliminar","role","button",3,"click"],[1,"fas","fa-trash","fa-lg"]],template:function(t,r){1&t&&(n.Rb(0,"div",0),n.Rb(1,"div",1),n.Nb(2,"hr"),n.Rb(3,"h3",2),n.Jc(4,"Evaluadores Activos"),n.Qb(),n.Nb(5,"hr"),n.Qb(),n.Nb(6,"div",3),n.Hc(7,d,3,0,"div",4),n.Hc(8,h,17,5,"div",4),n.Nb(9,"br"),n.Rb(10,"div",5),n.Rb(11,"app-search",6),n.bc("listEvent",function(t){return r.search(t)}),n.Qb(),n.Qb(),n.Rb(12,"div",7),n.Rb(13,"table",8),n.Rb(14,"thead",9),n.Rb(15,"tr"),n.Rb(16,"th",10),n.Jc(17,"Nombre"),n.Qb(),n.Rb(18,"th",10),n.Jc(19,"E-mail"),n.Qb(),n.Rb(20,"th",11),n.Jc(21,"Acciones"),n.Qb(),n.Qb(),n.Qb(),n.Rb(22,"tbody"),n.Hc(23,v,8,2,"tr",12),n.Qb(),n.Qb(),n.Qb(),n.Qb()),2&t&&(n.Ab(7),n.lc("ngIf",!r.new),n.Ab(1),n.lc("ngIf",r.new),n.Ab(3),n.lc("fullList",r.evaluatorsList)("attribFilter","nombre"),n.Ab(12),n.lc("ngForOf",r.showList))},directives:[o.o,u.a,o.n,s.q,s.j,s.d,s.a,s.i,s.c,o.m,s.l,s.r],styles:["@media (min-width:768px){hr[_ngcontent-%COMP%]{margin-left:25%;margin-right:25%;border:1px solid #00609c}.container-fluid[_ngcontent-%COMP%]{padding:5rem;background-color:#f4f4f4}}.contenidos[_ngcontent-%COMP%]{padding-bottom:3rem}.thead[_ngcontent-%COMP%]{background-color:#c8e5f1}.btn[_ngcontent-%COMP%]{border:none}.btn-primary[_ngcontent-%COMP%]{background-color:#3cafe0}.btn-primary[_ngcontent-%COMP%]:hover{background-color:#3994bb}.fa-envelope[_ngcontent-%COMP%]{color:#fff}.fa-trash[_ngcontent-%COMP%]{color:#3cafe0}.fa-trash[_ngcontent-%COMP%]:hover{color:#3994bb;cursor:pointer}"]}),t})();const g=[{path:"",component:(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=n.Gb({type:t,selectors:[["app-evaluators"]],decls:1,vars:0,template:function(t,r){1&t&&n.Nb(0,"app-evaluator-list")},directives:[p],styles:[""]}),t})()}];let w=(()=>{class t{}return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=n.Kb({type:t}),t.\u0275inj=n.Jb({imports:[[i.d.forChild(g)],i.d]}),t})();var Q=e("pKmL");let R=(()=>{class t{}return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=n.Kb({type:t}),t.\u0275inj=n.Jb({imports:[[o.c,w,Q.a]]}),t})()}}]);