(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{ZNzd:function(t,e,a){"use strict";a.r(e),a.d(e,"EvaluateArticleModule",function(){return g});var i=a("mrSG"),s=a("fXoL"),l=a("ofXK"),r=a("tyNb"),n=a("5eHb"),c=a("tk/3"),p=a("AytR");let o=class{constructor(t){this.httpClient=t,this.apiURL=p.a.apiURL}enviarEvaluacion(t){return this.httpClient.put(this.apiURL+"articulos/enviar-evaluacion/",t)}getPaperEval(){return this.httpClient.get(this.apiURL+"articulos/consulta-evaluaciones/")}editarEvaluacion(t){return this.httpClient.put(this.apiURL+"articulos/editar-evaluacion/?idArticulo="+t.idArticulo,t.evaluacion)}getEvaluaciones(t){return this.httpClient.get(this.apiURL+"articulos/consultaDetalleEvaluacion/?idArticulo="+t)}getTest(t){return this.httpClient.get(this.apiURL+"articulos/consulta-evaluacion/?idArticulo="+t)}};o.ctorParameters=()=>[{type:c.b}],o=Object(i.c)([Object(s.F)({providedIn:"root"})],o);var u=a("TJ9D"),v=a("y6im");let h=class{constructor(t,e,a,i,s){this.paperEvalService=t,this.evaluationService=e,this.toastr=a,this.paperService=i,this.router=s,this.paperList=[],this.paper=[],this.items=[],this.flagEvaluate=!1,this.ok=!1}ngOnInit(){this.getPapers()}getPapers(){this.paperEvalService.getPaperEval().subscribe(t=>{this.paperList=t.data,this.ok=!0})}getItems(t){this.paperEvalService.getTest(t).subscribe(t=>{this.items=t.data})}evaluate(t){this.paper=t,this.flagEvaluate=!this.flagEvaluate}getFile(t){this.paperService.getPaperFile(t).subscribe(t=>{const e=new Blob([t],{type:"application/pdf"}),a=window.URL.createObjectURL(e),i=document.createElement("a");void 0!==i.download&&(i.setAttribute("href",a),i.setAttribute("target","_blank"),i.style.visibility="hidden",document.body.appendChild(i),i.click(),document.body.removeChild(i))})}toggleFlagEvaluate(){this.flagEvaluate=!this.flagEvaluate}saveEvaluation(t){this.paperEvalService.editarEvaluacion(t).subscribe(e=>{t.submit?this.submitEvaluation(t):(this.getPapers(),this.toastr.success("La evaluaci\xf3n ha sido guardada!"),setTimeout(()=>{window.location.reload()},200))})}submitEvaluation(t){this.paperEvalService.enviarEvaluacion(t).subscribe(t=>{this.toastr.success("La evaluaci\xf3n ha sido enviada!"),this.toggleFlagEvaluate(),this.getPapers(),setTimeout(()=>{window.location.reload()},200)})}acceptEvaluate(t){this.paper=t,this.evaluationService.acceptEvaluationPaper(this.paper).subscribe(t=>{this.toastr.success("La evaluaci\xf3n ha sido aceptada.")})}cancelEvaluate(t){this.paper=t,this.evaluationService.cancelarEvaluationPaper(this.paper).subscribe(t=>{this.toastr.success("La evaluaci\xf3n ha sido rechazada.")})}};h.ctorParameters=()=>[{type:o},{type:v.a},{type:n.d},{type:u.a},{type:r.b}],h=Object(i.c)([Object(s.o)({selector:"app-evaluate-article",template:'<div class="container-fluid">\n  <app-evaluate-paper-list *ngIf="!flagEvaluate && ok"\n   [paperList]=\'paperList\'\n   (EvaluationEvent)=\'evaluate($event)\'\n   (EvaluationAcceptEvent)=\'evaluate($event)\'\n   (EvaluationCancelEvent)=\'evaluate($event)\'>\n</app-evaluate-paper-list>\n  <app-evaluate-paper-form *ngIf="flagEvaluate"\n  [paper]=\'paper\'\n  [items]="items"\n  (GetItemsEvent)="getItems($event)"\n  (GetFileEvent)="getFile($event)"\n  (SaveEvent)="saveEvaluation($event)"\n  (CancelEvent)="toggleFlagEvaluate($event)">\n  </app-evaluate-paper-form>\n</div>\n\n',styles:[""]})],h);const d=[{path:"",component:h}];let E=class{};E=Object(i.c)([Object(s.N)({imports:[r.c.forChild(d)],exports:[r.c]})],E);var b=a("pKmL");let g=class{};g=Object(i.c)([Object(s.N)({declarations:[h],imports:[l.c,E,b.a],schemas:[s.j]})],g)}}]);
//# sourceMappingURL=31.js.map