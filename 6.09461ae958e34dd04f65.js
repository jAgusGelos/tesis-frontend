(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{u3CC:function(e,t,r){"use strict";r.r(t),r.d(t,"CallForPapersModule",function(){return y});var o=r("ofXK"),i=r("tyNb"),n=r("fXoL"),s=r("TJ9D");function a(e,t){if(1&e){const e=n.Nb();n.Mb(0,"div",13),n.Mb(1,"a",14),n.Tb("click",function(){n.ec(e);const t=n.Vb().$implicit;return n.Vb(2).toggleEdit(t)}),n.Kb(2,"i",15),n.Lb(),n.ic(3," \xa0 \xa0 \xa0 "),n.Mb(4,"a",16),n.Tb("click",function(){n.ec(e);const t=n.Vb().$implicit;return n.Vb(2).toggleRemoveHandled(t)}),n.Kb(5,"i",17),n.Lb(),n.Lb()}}function c(e,t){if(1&e&&(n.Mb(0,"tr",11),n.Mb(1,"td"),n.ic(2),n.Wb(3,"titlecase"),n.Lb(),n.Mb(4,"td"),n.ic(5),n.Lb(),n.Mb(6,"td"),n.hc(7,a,6,0,"div",12),n.Lb(),n.Lb()),2&e){const e=t.$implicit;n.zb(2),n.jc(n.Xb(3,3,e.nombre)),n.zb(3),n.jc(e.nombre_estado),n.zb(2),n.Yb("ngIf","Subido"!=e.estado)}}function p(e,t){if(1&e&&(n.Mb(0,"table",6),n.Mb(1,"thead",7),n.Mb(2,"tr"),n.Mb(3,"th",8),n.ic(4,"Nombre"),n.Lb(),n.Mb(5,"th",8),n.ic(6,"Estado"),n.Lb(),n.Mb(7,"th",9),n.ic(8,"Acciones"),n.Lb(),n.Lb(),n.Lb(),n.Mb(9,"tbody"),n.hc(10,c,8,5,"tr",10),n.Lb(),n.Lb()),2&e){const e=n.Vb();n.zb(10),n.Yb("ngForOf",e.paperList)}}let l=(()=>{class e{constructor(){this.paperList=[],this.editPaperEvent=new n.n,this.deletePaperEvent=new n.n,this.newPaperEvent=new n.n}ngOnInit(){window.scrollTo(0,0)}toggleEdit(e){this.editPaperEvent.emit(e)}toggleNew(){this.newPaperEvent.emit()}toggleRemoveHandled(e){confirm("Esta seguro desea eliminar el paper: "+e.nombre+"\nToda la configuraci\xf3n creada se perder\xe1")&&this.deletePaperEvent.emit(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Db({type:e,selectors:[["app-paper-list"]],inputs:{paperList:"paperList"},outputs:{editPaperEvent:"editPaperEvent",deletePaperEvent:"deletePaperEvent",newPaperEvent:"newPaperEvent"},decls:11,vars:1,consts:[[1,"container-fluid"],[1,"contenidos"],[1,"text-center"],["class","table text-center table-hover table-bordered",4,"ngIf"],[1,"row","justify-content-md-end"],["role","button",1,"btn","btn-primary","col-sm-4",3,"click"],[1,"table","text-center","table-hover","table-bordered"],[1,"thead"],[1,"col-md-5"],[1,"col-md-2"],["class","align-items-center",4,"ngFor","ngForOf"],[1,"align-items-center"],["class","btn-group col-md-3",4,"ngIf"],[1,"btn-group","col-md-3"],["title","Editar",3,"click"],[1,"fas","fa-pencil-alt"],["title","Eliminar",3,"click"],[1,"fas","fa-trash"]],template:function(e,t){1&e&&(n.Mb(0,"div",0),n.Mb(1,"div",1),n.Kb(2,"hr"),n.Mb(3,"h3",2),n.ic(4,"Gesti\xf3n de Papers"),n.Lb(),n.Kb(5,"hr"),n.Lb(),n.hc(6,p,11,1,"table",3),n.Kb(7,"br"),n.Mb(8,"div",4),n.Mb(9,"a",5),n.Tb("click",function(){return t.toggleNew()}),n.ic(10,"Nuevo"),n.Lb(),n.Lb(),n.Lb()),2&e&&(n.zb(6),n.Yb("ngIf",t.paperList.length>0))},directives:[o.l,o.k],pipes:[o.o],styles:[".container-fluid[_ngcontent-%COMP%]{background-color:#f4f4f4}.contenidos[_ngcontent-%COMP%]{padding-bottom:3rem}.thead[_ngcontent-%COMP%]{background-color:#c8e5f1}.greyned[_ngcontent-%COMP%]{color:grey}.btn-primary[_ngcontent-%COMP%]{background-color:#3cafe0;border:none}i[_ngcontent-%COMP%]{padding-top:1.5rem;cursor:pointer}i[_ngcontent-%COMP%]:hover{color:blue}.fas[_ngcontent-%COMP%]{font-size:1.25rem;color:#00609c}hr[_ngcontent-%COMP%]{border:1px solid #00609c}@media (min-width:768px){hr[_ngcontent-%COMP%]{margin-left:25%;margin-right:25%}.container-fluid[_ngcontent-%COMP%]{padding:5rem}}"]}),e})();var b=r("3Pt+"),u=r("7dP1");function d(e,t){1&e&&(n.Mb(0,"span",8),n.ic(1," Requerido "),n.Lb())}function m(e,t){if(1&e&&(n.Mb(0,"option",28),n.ic(1),n.Lb()),2&e){const e=t.$implicit;n.Zb("value",e.id),n.zb(1),n.kc(" \u200c",e.descripcion," ")}}function f(e,t){1&e&&(n.Mb(0,"span",8),n.ic(1," Requerido. "),n.Lb())}const h=function(e){return{valid:e}};function g(e,t){if(1&e){const e=n.Nb();n.Mb(0,"ul",30),n.ic(1),n.Mb(2,"i",31),n.Tb("click",function(){n.ec(e);const r=t.$implicit;return n.Vb(2).delAutor(r)}),n.Lb(),n.Lb()}if(2&e){const e=t.$implicit;n.Yb("ngClass",n.cc(2,h,!0===e.status)),n.zb(1),n.jc(e.mail)}}function v(e,t){if(1&e&&(n.Mb(0,"div",6),n.Mb(1,"label",15),n.ic(2,"Autores Seleccionados:"),n.Lb(),n.Mb(3,"div",9),n.hc(4,g,3,4,"ul",29),n.Lb(),n.Lb()),2&e){const e=n.Vb();n.zb(4),n.Yb("ngForOf",e.autoresList)}}function P(e,t){1&e&&(n.Mb(0,"span",8),n.ic(1," Requerido "),n.Lb())}function M(e,t){if(1&e&&(n.Mb(0,"div",6),n.Mb(1,"label",21),n.ic(2,"Archivo ya subido:"),n.Lb(),n.Mb(3,"label",32),n.ic(4),n.Wb(5,"titlecase"),n.Lb(),n.Lb()),2&e){const e=n.Vb();n.zb(4),n.kc("",n.Xb(5,1,e.paper.nombre),".pdf")}}const L=function(e){return{"is-invalid":e}};let w=(()=>{class e{constructor(e,t,r){this.formBuilder=e,this.paperService=t,this.auth=r,this.paperEmitter=new n.n,this.cancelPaper=new n.n,this.submitted=!1,this.autoresList=[],this.fileToUpload=null}ngOnInit(){if(window.scrollTo(0,0),console.log(this.paper),this.formPaper=this.formBuilder.group({nombre:[this.paper.nombre,[b.m.required]],simposio:[this.paper.idSimposio,[b.m.required]],archivo:[null,[b.m.required]],autores:["",[b.m.pattern("^[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$")]]}),this.paper){if(this.paper.autores_registrados){const e=this.paper.autores_registrados.map(e=>({mail:e,status:!0}));this.autoresList=this.autoresList.concat(e)}if(this.paper.autores_no_registrados){const e=this.paper.autores_no_registrados.map(e=>({mail:e,status:!1}));this.autoresList=this.autoresList.concat(e)}}console.log(this.autoresList)}cancel(){this.cancelPaper.emit()}nuevoArchivo(){this.paper.archivo=""}addAutor(){var e;if(this.formPaper.controls.autores.value&&!(null===(e=this.formPaper.controls.autores.errors)||void 0===e?void 0:e.pattern)){const e=this.formPaper.controls.autores.value;if(this.autoresList.some(t=>{if(t.mail===e)return!0}))return alert("Ya existe un usuario con ese Email ingresado"),null;this.paperService.checkAutor(e).subscribe(t=>{t.data?(this.paper.autores.push(e),this.autoresList.push({mail:e,status:!0})):(alert("El autor ingresado no est\xe1 registrado en el sistema. \nRecuerde que todos los autores deben estar registrados para poder enviar a correcci\xf3n \nDescuida, puedes guardar tus cambios hasta que este usuario cree su perfil\nNo te preocupes, nosotros le enviaremos un mail a este nuevo autor"),this.autoresList.push({mail:e,status:!1}))}),this.formPaper.controls.autores.reset()}else alert("Ingrese un Email V\xe1lido")}delAutor(e){this.autoresList=this.autoresList.filter(t=>t.mail!==e.mail?t:null),this.paper.autores=this.autoresList.map(e=>e.mail)}save(){const e=this.auth.getUserId();this.paper={archivo:this.fileToUpload,autores:this.autoresList.map(e=>e.mail),id:"",estado:"sin subir",nombre:this.formPaper.controls.nombre.value,responsable:e,simposio:this.formPaper.controls.simposio.value},this.paperEmitter.emit(this.paper)}handleFileInput(e){this.fileToUpload=e.item(0)}submit(){if(this.submitted=!0,this.formPaper.invalid||null===this.fileToUpload||""===this.formPaper.controls.simposio.value.trim())return void alert("Por favor complete todos los datos.");const e=this.auth.getUserId();this.paper={archivo:this.fileToUpload,autores:this.autoresList.map(e=>e.mail),id:"",estado:"sin subir",nombre:this.formPaper.controls.nombre.value,responsable:e,simposio:this.formPaper.controls.simposio.value},this.paperEmitter.emit([this.paper])}}return e.\u0275fac=function(t){return new(t||e)(n.Jb(b.b),n.Jb(s.a),n.Jb(u.a))},e.\u0275cmp=n.Db({type:e,selectors:[["app-paper-form"]],inputs:{paper:"paper",simposios:"simposios"},outputs:{paperEmitter:"paperEmitter",cancelPaper:"cancelPaper"},decls:55,vars:16,consts:[[1,"card"],[1,"card-body"],[1,"contenidos"],[1,"card-title","text-center"],[1,"card-text","text-right"],[3,"formGroup"],[1,"form-group","row"],["for","nombre",1,"col-form-label","col-sm-3","col-sm-offset-2"],[1,"text-danger"],[1,"col-sm-6"],["type","text","formControlName","nombre","onclick","this.select()",1,"form-control",3,"ngClass"],["class","text-danger",4,"ngIf"],["for","simposio",1,"col-form-label","col-sm-3","col-sm-offset-2"],["name","simposio","formControlName","simposio",1,"col-sm-4","form-select",3,"ngClass"],[3,"value",4,"ngFor","ngForOf"],["for","autores",1,"col-form-label","col-sm-3","col-sm-offset-2"],[1,"input-group"],["type","email","formControlName","autores","onclick","this.select()",1,"form-control"],[1,"btn","btn-secondary",3,"click"],["aria-hidden","true",1,"fa","fa-plus"],["class","form-group row",4,"ngIf"],["for","archivo",1,"col-form-label","col-sm-3","col-sm-offset-2"],["type","file","accept",".pdf","formControlName","archivo","onclick","this.select()",1,"form-control",3,"ngClass","change"],[1,"row","justify-content-md-center","btn-row"],["role","button",1,"btn","btn-secondary","col-md-3",3,"click"],["role","button",1,"btn","btn-primary","col-md-3",3,"click"],["role","button",1,"btn","btn-danger","col-md-7",3,"click"],[1,"container"],[3,"value"],["class","autoresSelected",3,"ngClass",4,"ngFor","ngForOf"],[1,"autoresSelected",3,"ngClass"],["aria-hidden","true",1,"fa","fa-window-close",3,"click"],["for","archivo",1,"col-form-label","col-sm-3"]],template:function(e,t){1&e&&(n.Mb(0,"div",0),n.Mb(1,"div",1),n.Mb(2,"div",2),n.Kb(3,"hr"),n.Mb(4,"h3",3),n.ic(5,"Nuevo Paper"),n.Lb(),n.Kb(6,"hr"),n.Lb(),n.Mb(7,"div",4),n.Mb(8,"form",5),n.Mb(9,"div",6),n.Mb(10,"label",7),n.ic(11,"Nombre: "),n.Mb(12,"span",8),n.ic(13,"*"),n.Lb(),n.Lb(),n.Mb(14,"div",9),n.Kb(15,"input",10),n.hc(16,d,2,0,"span",11),n.Lb(),n.Lb(),n.Mb(17,"div",6),n.Mb(18,"label",12),n.ic(19,"Simposio:"),n.Mb(20,"span",8),n.ic(21,"*"),n.Lb(),n.Lb(),n.Mb(22,"div",9),n.Mb(23,"select",13),n.hc(24,m,2,2,"option",14),n.Lb(),n.hc(25,f,2,0,"span",11),n.Lb(),n.Lb(),n.Mb(26,"div",6),n.Mb(27,"label",15),n.ic(28,"Agregar Autores:"),n.Lb(),n.Mb(29,"div",9),n.Mb(30,"div",16),n.Kb(31,"input",17),n.Mb(32,"button",18),n.Tb("click",function(){return t.addAutor()}),n.Kb(33,"i",19),n.Lb(),n.Lb(),n.Lb(),n.Lb(),n.hc(34,v,5,1,"div",20),n.Mb(35,"div",6),n.Mb(36,"label",21),n.ic(37,"Archivo: "),n.Mb(38,"span",8),n.ic(39,"*"),n.Lb(),n.Lb(),n.Mb(40,"div",9),n.Mb(41,"input",22),n.Tb("change",function(e){return t.handleFileInput(e.target.files)}),n.Lb(),n.hc(42,P,2,0,"span",11),n.Lb(),n.Lb(),n.hc(43,M,6,3,"div",20),n.Mb(44,"div",23),n.Mb(45,"a",24),n.Tb("click",function(){return t.cancel()}),n.ic(46,"Cancelar"),n.Lb(),n.ic(47," \xa0 "),n.Mb(48,"a",25),n.Tb("click",function(){return t.save()}),n.ic(49,"Guardar Cambios"),n.Lb(),n.Lb(),n.Kb(50,"br"),n.Mb(51,"div",23),n.Mb(52,"a",26),n.Tb("click",function(){return t.submit()}),n.ic(53,"Subir Paper"),n.Lb(),n.Lb(),n.Lb(),n.Lb(),n.Lb(),n.Lb(),n.Kb(54,"div",27)),2&e&&(n.zb(8),n.Yb("formGroup",t.formPaper),n.zb(7),n.Yb("ngClass",n.cc(10,L,(t.formPaper.controls.nombre.touched||t.submitted)&&t.formPaper.controls.nombre.errors)),n.zb(1),n.Yb("ngIf",(t.formPaper.controls.nombre.touched||t.submitted)&&(null==t.formPaper.controls.nombre.errors?null:t.formPaper.controls.nombre.errors.required)),n.zb(7),n.Yb("ngClass",n.cc(12,L,(t.formPaper.controls.simposio.touched||t.submitted)&&""===t.formPaper.controls.simposio.value&&t.formPaper.controls.simposio.errors)),n.zb(1),n.Yb("ngForOf",t.simposios),n.zb(1),n.Yb("ngIf",(t.formPaper.controls.simposio.touched||t.submitted)&&""===t.formPaper.controls.simposio.value&&(null==t.formPaper.controls.simposio.errors?null:t.formPaper.controls.simposio.errors.required)),n.zb(9),n.Yb("ngIf",0!==t.autoresList.length),n.zb(7),n.Yb("ngClass",n.cc(14,L,(t.formPaper.controls.archivo.touched||t.submitted)&&t.formPaper.controls.archivo.errors)),n.zb(1),n.Yb("ngIf",t.submitted&&(null==t.formPaper.controls.archivo.errors?null:t.formPaper.controls.archivo.errors.required)),n.zb(1),n.Yb("ngIf",t.paper.nombre))},directives:[b.n,b.g,b.d,b.a,b.f,b.c,o.j,o.l,b.l,o.k,b.i,b.o],pipes:[o.o],styles:[".autoresSelected[_ngcontent-%COMP%]{border:1px solid #000;padding:.3rem;margin-top:1;color:#000;text-decoration:none;background-color:#f27289;margin-right:.5rem}ul[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.fa[_ngcontent-%COMP%]{justify-content:flex-end}.valid[_ngcontent-%COMP%]{background-color:#bee895}.card[_ngcontent-%COMP%]{margin-left:auto;margin-right:auto}.login-form[_ngcontent-%COMP%]{width:75%}.btn-primary[_ngcontent-%COMP%]{background-color:#3cafe0;border:none}.card[_ngcontent-%COMP%]{border-radius:3rem;padding-bottom:2rem;margin:1rem auto;background-color:#f4f4f4}.login-form[_ngcontent-%COMP%]{width:100%}.form-group[_ngcontent-%COMP%]{padding-top:.75rem;padding-bottom:.75rem}a[_ngcontent-%COMP%]{cursor:pointer}.card-title[_ngcontent-%COMP%]{width:100%;margin-left:auto;margin-right:auto;font-weight:300;padding-top:.5rem;padding-bottom:.5rem;max-width:-webkit-fit-content;max-width:-moz-fit-content;max-width:fit-content}hr[_ngcontent-%COMP%]{border:1px solid #00609c}input[_ngcontent-%COMP%]{border:none;border-bottom:1px solid #8d999e}@media (min-width:768px){.card[_ngcontent-%COMP%]{max-width:75%}.card-body[_ngcontent-%COMP%]{padding:auto}hr[_ngcontent-%COMP%]{margin-left:25%;margin-right:25%}}.option[_ngcontent-%COMP%]{width:auto}"]}),e})();function C(e,t){if(1&e){const e=n.Nb();n.Mb(0,"app-paper-list",3),n.Tb("newPaperEvent",function(){return n.ec(e),n.Vb().newPaper()})("editPaperEvent",function(t){return n.ec(e),n.Vb().editPaper(t)})("deletePaperEvent",function(t){return n.ec(e),n.Vb().deletePaper(t)}),n.Lb()}if(2&e){const e=n.Vb();n.Yb("paperList",e.paperList)}}function E(e,t){if(1&e){const e=n.Nb();n.Mb(0,"app-paper-form",4),n.Tb("paperEmitter",function(t){return n.ec(e),n.Vb().toggleCreatePaper(t)})("cancelPaper",function(){return n.ec(e),n.Vb().newPaper()}),n.Lb()}if(2&e){const e=n.Vb();n.Yb("simposios",e.simposios)("paper",e.paper)}}const O=[{path:"",component:(()=>{class e{constructor(e,t){this.paperService=e,this.router=t,this.paperList=[],this.edit=!1,this.paper={},this.simposios=[],this.router.routeReuseStrategy.shouldReuseRoute=()=>!1}ngOnInit(){window.scrollTo(0,0),this.getSimposios(),this.getPaper()}getSimposios(){this.paperService.getSimposiosActivos().subscribe(e=>{this.simposios=e.data})}getPaper(){this.paperService.getPaper().subscribe(e=>{this.paperList=e.data,console.log(this.paperList)})}newPaper(){this.edit=!this.edit,this.paper={id:"",autores:[],responsable:"",nombre:"",estado:"Sin subir",simposio:"",archivo:null}}editPaper(e){this.edit=!this.edit,this.paper=e}deletePaper(e){this.paperService.deletePaper(e).subscribe(e=>{alert("El paper ha sido eliminado correctamente"),this.getPaper()})}toggleCreatePaper(e){console.log(e),""===e.id?this.paperService.postPaper(e).subscribe(e=>{alert("Paper Creado Correctamente"),this.router.navigateByUrl("/callForPapers")}):this.paperService.putPaper(e).subscribe(e=>{alert("Paper Modificado Correctamente"),this.router.navigateByUrl("/callForPapers")})}}return e.\u0275fac=function(t){return new(t||e)(n.Jb(s.a),n.Jb(i.b))},e.\u0275cmp=n.Db({type:e,selectors:[["app-call-for-papers"]],decls:3,vars:2,consts:[[1,"container-fluid"],[3,"paperList","newPaperEvent","editPaperEvent","deletePaperEvent",4,"ngIf"],[3,"simposios","paper","paperEmitter","cancelPaper",4,"ngIf"],[3,"paperList","newPaperEvent","editPaperEvent","deletePaperEvent"],[3,"simposios","paper","paperEmitter","cancelPaper"]],template:function(e,t){1&e&&(n.Mb(0,"div",0),n.hc(1,C,1,1,"app-paper-list",1),n.hc(2,E,1,2,"app-paper-form",2),n.Lb()),2&e&&(n.zb(1),n.Yb("ngIf",!t.edit),n.zb(1),n.Yb("ngIf",t.edit))},directives:[o.l,l,w],styles:[""]}),e})()}];let _=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=n.Hb({type:e}),e.\u0275inj=n.Gb({imports:[[i.c.forChild(O)],i.c]}),e})();var k=r("pKmL");let y=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=n.Hb({type:e}),e.\u0275inj=n.Gb({imports:[[o.b,_,k.a]]}),e})()}}]);