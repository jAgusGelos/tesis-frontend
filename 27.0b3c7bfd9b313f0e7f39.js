(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{ITub:function(t,e,o){"use strict";o.r(e),o.d(e,"EvaluatorsModule",function(){return L});var r=o("ofXK"),a=o("tyNb"),i=o("fXoL"),n=o("3Pt+"),b=o("y6im"),s=o("f4AX");function c(t,e){if(1&t){const t=i.Nb();i.Mb(0,"div",23),i.Mb(1,"a",24),i.Tb("click",function(){return i.ec(t),i.Vb().toggleNew()}),i.ic(2,"Nuevo Evaluador"),i.Lb(),i.Lb()}}function l(t,e){if(1&t&&(i.Mb(0,"option",36),i.ic(1),i.Lb()),2&t){const t=e.$implicit;i.Zb("value",t.email),i.zb(1),i.lc("",t.nombre," ",t.apellido," ")}}const d=function(t){return{"is-invalid":t}};function u(t,e){if(1&t){const t=i.Nb();i.Mb(0,"div",23),i.Mb(1,"form",25),i.Mb(2,"div",26),i.Mb(3,"h5",27),i.ic(4,"Agregar Evaluador"),i.Lb(),i.Mb(5,"p",28),i.ic(6,"Se enviar\xe1 un correo de invitaci\xf3n al usuario para que sea evaluador."),i.Lb(),i.Kb(7,"input",29),i.Mb(8,"datalist",30),i.hc(9,l,2,3,"option",31),i.Lb(),i.Kb(10,"br"),i.Mb(11,"a",32),i.Tb("click",function(){return i.ec(t),i.Vb().toggleNew()}),i.ic(12,"Cancelar"),i.Lb(),i.ic(13," \xa0 "),i.Mb(14,"a",33),i.Tb("click",function(){return i.ec(t),i.Vb().sendMail()}),i.ic(15," Enviar correo \xa0 "),i.Kb(16,"i",34),i.Lb(),i.Kb(17,"button",35),i.Lb(),i.Lb(),i.Lb()}if(2&t){const t=i.Vb();i.zb(1),i.Yb("formGroup",t.formEvaluator),i.zb(6),i.Yb("ngClass",i.cc(3,d,t.submitted&&t.formEvaluator.controls.correo.errors)),i.zb(2),i.Yb("ngForOf",t.usersList)}}function m(t,e){1&t&&(i.Mb(0,"p"),i.ic(1,"Activo"),i.Lb())}function f(t,e){1&t&&(i.Mb(0,"p"),i.ic(1,"Inactivo"),i.Lb())}function v(t,e){if(1&t){const t=i.Nb();i.Mb(0,"tr",37),i.Mb(1,"td"),i.ic(2),i.Lb(),i.Mb(3,"td"),i.ic(4),i.Lb(),i.Mb(5,"td"),i.hc(6,m,2,0,"p",38),i.hc(7,f,2,0,"p",38),i.Lb(),i.Mb(8,"td"),i.Mb(9,"a",39),i.Tb("click",function(){i.ec(t);const o=e.index;return i.Vb().setDeleteEvaluator(o)}),i.Kb(10,"i",40),i.Lb(),i.Lb(),i.Lb()}if(2&t){const t=e.$implicit;i.zb(2),i.jc(t.nombre),i.zb(2),i.jc(t.email),i.zb(2),i.Yb("ngIf",t.estado),i.zb(1),i.Yb("ngIf",!t.estado)}}let h=(()=>{class t{constructor(t,e,o){this.evaluatorService=t,this.userService=e,this.formBuilder=o,this.submitted=!1,this.new=!1,this.evaluatorsList=[]}ngOnInit(){this.formEvaluator=this.formBuilder.group({correo:["",[n.m.required]]}),this.fillEvaluatorsList(),this.getUsers()}sendMail(){if(this.submitted=!0,this.formEvaluator.valid){const t=this.searchByEmail(this.formEvaluator.controls.correo.value);if(null==t)return void this.showMessage("Error","El correo ingresado no pertenece a un usuario registrado.");const e=[t.id.toString()];this.evaluatorService.postEvaluator(e).subscribe(t=>{null!=t.data?(this.showMessage("\xa1Correo enviado!",t.data),this.submitted=!1,this.toggleNew()):this.showMessage("Error",t.error)})}}fillEvaluatorsList(){this.evaluatorService.getEvaluators(0).subscribe(t=>{this.evaluatorsList=t.data})}showMessage(t,e){this.messageHeader=t,this.messageBody=e,document.getElementById("modalCorreo").click()}searchByEmail(t){for(let e=0;e<this.usersList.length;e++)if(t===this.usersList[e].email)return this.usersList[e];return null}getUsers(){this.userService.getAllUsers().subscribe(t=>{this.usersList=t})}deleteEvaluator(){this.evaluatorsList.splice(this.index,1)}setDeleteEvaluator(t){this.index=t,this.deleteEvName=this.evaluatorsList[t].nombre}toggleNew(){this.submitted=!1,this.new=!this.new}}return t.\u0275fac=function(e){return new(e||t)(i.Jb(b.a),i.Jb(s.a),i.Jb(n.b))},t.\u0275cmp=i.Db({type:t,selectors:[["app-evaluator-list"]],decls:52,vars:6,consts:[[1,"container-fluid"],[1,"contenidos"],[1,"text-center"],["id","backdrop",1,"modal-backdrop","fade","show",2,"display","none"],["class","row justify-content-md-end",4,"ngIf"],[1,"row"],[1,"table","text-center","table-hover","table-bordered"],[1,"thead"],[1,"col-md-4"],[1,"col-md-2"],["class","align-items-center",4,"ngFor","ngForOf"],["id","modal-correo","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"],["id","modal-eliminar","data-bs-backdrop","static","data-bs-keyboard","false","tabindex","-1","aria-labelledby","staticBackdropLabel","aria-hidden","true",1,"modal","fade"],["id","staticBackdropLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal",1,"btn","btn-primary",3,"click"],[1,"row","justify-content-md-end"],["role","button",1,"btn","btn-primary","col-sm-2",3,"click"],[1,"card","col-md-4",3,"formGroup"],[1,"card-body"],[1,"card-title"],[1,"card-text"],["list","correos","placeholder","Buscar por nombre o direcci\xf3n de correo","formControlName","correo",1,"form-control",3,"ngClass"],["id","correos"],[3,"value",4,"ngFor","ngForOf"],["role","button",1,"btn","btn-secondary",3,"click"],["role","button",1,"btn","btn-primary",3,"click"],[1,"fas","fa-envelope"],["hidden","","id","modalCorreo","data-bs-toggle","modal","data-bs-target","#modal-correo"],[3,"value"],[1,"align-items-center"],[4,"ngIf"],["title","Eliminar","role","button","data-bs-toggle","modal","data-bs-target","#modal-eliminar",3,"click"],[1,"fas","fa-trash","fa-lg"]],template:function(t,e){1&t&&(i.Mb(0,"div",0),i.Mb(1,"div",1),i.Kb(2,"hr"),i.Mb(3,"h3",2),i.ic(4,"Evaluadores Activos"),i.Lb(),i.Kb(5,"hr"),i.Lb(),i.Kb(6,"div",3),i.hc(7,c,3,0,"div",4),i.hc(8,u,18,5,"div",4),i.Kb(9,"br"),i.Mb(10,"div",5),i.Mb(11,"table",6),i.Mb(12,"thead",7),i.Mb(13,"tr"),i.Mb(14,"th",8),i.ic(15,"Nombre"),i.Lb(),i.Mb(16,"th",8),i.ic(17,"E-mail"),i.Lb(),i.Mb(18,"th",9),i.ic(19,"Estado"),i.Lb(),i.Mb(20,"th",9),i.ic(21,"Acciones"),i.Lb(),i.Lb(),i.Lb(),i.Mb(22,"tbody"),i.hc(23,v,11,4,"tr",10),i.Lb(),i.Lb(),i.Lb(),i.Mb(24,"div"),i.Mb(25,"div",11),i.Mb(26,"div",12),i.Mb(27,"div",13),i.Mb(28,"div",14),i.Mb(29,"h5",15),i.ic(30),i.Lb(),i.Kb(31,"button",16),i.Lb(),i.Mb(32,"div",17),i.ic(33),i.Lb(),i.Mb(34,"div",18),i.Mb(35,"a",19),i.ic(36,"Cancelar"),i.Lb(),i.Lb(),i.Lb(),i.Lb(),i.Lb(),i.Mb(37,"div",20),i.Mb(38,"div",12),i.Mb(39,"div",13),i.Mb(40,"div",14),i.Mb(41,"h5",21),i.ic(42,"Eliminar Evaluador"),i.Lb(),i.Kb(43,"button",16),i.Lb(),i.Mb(44,"div",17),i.Mb(45,"p"),i.ic(46),i.Lb(),i.Lb(),i.Mb(47,"div",18),i.Mb(48,"a",19),i.ic(49,"Cancelar"),i.Lb(),i.Mb(50,"a",22),i.Tb("click",function(){return e.deleteEvaluator()}),i.ic(51,"Aceptar"),i.Lb(),i.Lb(),i.Lb(),i.Lb(),i.Lb(),i.Lb(),i.Lb()),2&t&&(i.zb(7),i.Yb("ngIf",!e.new),i.zb(1),i.Yb("ngIf",e.new),i.zb(15),i.Yb("ngForOf",e.evaluatorsList),i.zb(7),i.jc(e.messageHeader),i.zb(3),i.kc(" ",e.messageBody," "),i.zb(13),i.kc("\xbfSeguro que desea eliminar a ",e.deleteEvName,"?"))},directives:[r.l,r.k,n.n,n.g,n.d,n.a,n.f,n.c,r.j,n.i,n.o],styles:[".container-fluid[_ngcontent-%COMP%]{background-color:#f4f4f4}.contenidos[_ngcontent-%COMP%]{padding-bottom:3rem}.thead[_ngcontent-%COMP%]{background-color:#c8e5f1}.btn[_ngcontent-%COMP%]{border:none}.btn-primary[_ngcontent-%COMP%]{background-color:#3cafe0}.btn-primary[_ngcontent-%COMP%]:hover{background-color:#3994bb}.fa-envelope[_ngcontent-%COMP%]{color:#fff}.fa-trash[_ngcontent-%COMP%]{color:#3cafe0}.fa-trash[_ngcontent-%COMP%]:hover{color:#3994bb;cursor:pointer}hr[_ngcontent-%COMP%]{border:1px solid #00609c}@media (min-width:768px){hr[_ngcontent-%COMP%]{margin-left:25%;margin-right:25%}.container-fluid[_ngcontent-%COMP%]{padding:5rem}}"]}),t})();const g=[{path:"",component:(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=i.Db({type:t,selectors:[["app-evaluators"]],decls:1,vars:0,template:function(t,e){1&t&&i.Kb(0,"app-evaluator-list")},directives:[h],styles:[""]}),t})()}];let M=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=i.Hb({type:t}),t.\u0275inj=i.Gb({imports:[[a.c.forChild(g)],a.c]}),t})();var p=o("pKmL");let L=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=i.Hb({type:t}),t.\u0275inj=i.Gb({imports:[[r.b,M,p.a]]}),t})()}}]);