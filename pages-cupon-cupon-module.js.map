{"version":3,"sources":["./src/app/pages/cupon/cupon-routing.module.ts","./src/app/core/services/cupon.service.ts","./src/app/pages/cupon/cupon.component.ts","./src/app/pages/cupon/cupon.component.html","./src/app/pages/cupon/cupon.module.ts"],"names":[],"mappings":";;;;;;;;;;AACA;AAAA;AAAA;AAAA;AAAA;AAAuD;AACJ;;;AAEnD,MAAM,MAAM,GAAW,CAAC;QACtB,IAAI,EAAE,EAAE;QACR,SAAS,EAAE,+DAAc;KAC1B,CAAC,CAAC;AAMI,MAAM,kBAAkB;;oFAAlB,kBAAkB;iGAAlB,kBAAkB;qGAHpB,CAAC,4DAAY,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC,EAC9B,4DAAY;mIAEX,kBAAkB,uFAFnB,4DAAY;;;;;;;;;;;;;ACTxB;AAAA;AAAA;AAAA;AAAA;AAA2D;;;AAMpD,MAAM,YAAY;IAIvB,YAAqB,UAAsB;QAAtB,eAAU,GAAV,UAAU,CAAY;QAFnC,WAAM,GAAG,wEAAW,CAAC,MAAM,CAAC;IAEW,CAAC;IAEhD,UAAU;QACR,OAAO,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,GAAG,uCAAuC,CAAC,CAAC;IACpF,CAAC;IAED,gBAAgB,CAAC,MAAc;QAC7B,OAAO,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,GAAG,qDAAqD,GAAG,MAAM,CAAC,CAAC;IAC3G,CAAC;IAED,SAAS,CAAC,KAAa;QACrB,OAAO,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,qCAAqC,EAAE,KAAK,CAAC,CAAC;IAC1F,CAAC;IAED,QAAQ,CAAC,KAAa;QACpB,OAAO,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,GAAG,mDAAmD,GAAG,KAAK,CAAC,MAAM,EAAE,KAAK,CAAC,CAAC;IACtH,CAAC;IAED,WAAW,CAAC,KAAa;QACvB,OAAO,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,IAAI,CAAC,MAAM,GAAG,qDAAqD,GAAG,KAAK,CAAC,MAAM,CAAC,CAAC;IACpH,CAAC;IAED,WAAW,CAAC,MAAc;QACxB,OAAO,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,GAAG,yDAAyD,GAAG,MAAM,CAAC,CAAC;IAC/G,CAAC;IAED,YAAY,CAAC,MAAc;QACzB,OAAO,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,GAAG,sDAAsD,GAAG,MAAM,CAAC,CAAC;IAC5G,CAAC;;wEAhCU,YAAY;+FAAZ,YAAY,WAAZ,YAAY,mBAFX,MAAM;;;;;;;;;;;;;ACApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAmG;;;;;;;;;;ICL/F,sEAAmB;IACf,oFAG2C;IAF3C,yVAAoC;IAGpC,4DAAiB;IACrB,4DAAM;;;IALc,0DAAuB;IAAvB,uFAAuB;;;;IAM3C,sEAAkB;IACd,oFAQmD;IAHnC,sVAAmC;IAInD,4DAAiB;IACrB,4DAAM;;;IAVc,0DAAW;IAAX,2EAAW;;ADI5B,MAAM,cAAc;IAWzB,YAAoB,YAA0B,EAC1B,aAA6B,EAC7B,MAAqB;QAFrB,iBAAY,GAAZ,YAAY,CAAc;QAC1B,kBAAa,GAAb,aAAa,CAAgB;QAC7B,WAAM,GAAN,MAAM,CAAe;QAXzC,SAAI,GAAG,KAAK,CAAC;QACb,QAAG,GAAG,KAAK,CAAC;QACZ,YAAO,GAAG,EAAC,MAAM,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAC,CAAC;QAGjC,eAAU,GAAG,EAAE,CAAC;QAEhB,mBAAc,GAAG,EAAE,CAAC;IAIyB,CAAC;IAE9C,QAAQ;QACN,IAAI,CAAC,UAAU,EAAE,CAAC;IACpB,CAAC;IAED,UAAU;QACR,IAAI,CAAC,SAAS,GAAG,EAAE,CAAC;QACpB,IAAI,CAAC,YAAY,CAAC,UAAU,EAAE,CAAC,SAAS,CAAC,CAAC,GAAQ,EAAE,EAAE;YACpD,IAAI,CAAC,SAAS,GAAG,GAAG,CAAC,IAAI,CAAC;QAC5B,CAAC,CAAC,CAAC;IACL,CAAC;IAED,SAAS,CAAC,IAAI;QACZ,IAAI,CAAC,YAAY,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC,SAAS,CAAC,CAAC,GAAQ,EAAE,EAAE;YACvD,IAAI,CAAC,UAAU,EAAE,CAAC;YAClB,IAAI,CAAC,UAAU,EAAE,CAAC;QACpB,CAAC,CAAC,CAAC;IACL,CAAC;IAED,QAAQ,CAAC,IAAI;QACX,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,SAAS,CAAC,CAAC,GAAQ,EAAE,EAAE;YACtD,IAAI,CAAC,UAAU,EAAE,CAAC;YAClB,IAAI,CAAC,UAAU,EAAE,CAAC;QACpB,CAAC,CAAC,CAAC;IACL,CAAC;IAED,WAAW,CAAC,KAAK;QACf,IAAI,CAAC,MAAM,CAAC,IAAI,CAAE,qCAAqC,GAAG,KAAK,CAAC,MAAM,GAAG,GAAG,EAAE,cAAc,EAAE;YAC1F,cAAc,EAAE,gHAAoB;YACpC,cAAc,EAAE,IAAI;YACpB,YAAY,EAAE,KAAK;YACnB,UAAU,EAAE,IAAI;SACjB,CAAC;aACD,QAAQ,CAAC,SAAS,CAAC,GAAG,EAAE;YACvB,IAAI,CAAC,YAAY,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC,SAAS,CAAC,CAAC,GAAQ,EAAE,EAAE;gBAC1D,IAAI,CAAC,UAAU,EAAE,CAAC;YACpB,CAAC,CAAC,CAAC;QACL,CAAC,CAAC,CAAC;IACP,CAAC;IAED,cAAc,CAAC,MAAM;QACnB,IAAI,CAAC,YAAY,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC,SAAS,CAAC,CAAC,GAAQ,EAAE,EAAE;QAC7D,CAAC,CAAC,CAAC;IACL,CAAC;IAED,kBAAkB,CAAC,MAAM;QACvB,IAAI,CAAC,YAAY,CAAC,YAAY,CAAC,MAAM,CAAC,CAAC,SAAS,CAC9C,GAAG,CAAC,EAAE;YAAE,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,gBAAgB,CAAC,CAAC;YACtC,IAAI,CAAC,cAAc,GAAG,GAAG,CAAC,MAAM,CAAC;QAAC,CAAC,EAC3C,GAAG,CAAC,EAAE;YAAE,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,sBAAsB,CAAC,CAAC;YAC5C,IAAI,CAAC,cAAc,GAAG,GAAG,CAAC,MAAM,CAAC;QAAC,CAAC,CAAC,CAAC;IACjD,CAAC;IAED,UAAU;QACR,IAAI,CAAC,UAAU,GAAG,EAAE,CAAC;QACrB,IAAI,CAAC,aAAa,CAAC,UAAU,EAAE,CAAC,SAAS,CAAC,CAAC,GAAQ,EAAE,EAAE;YACrD,IAAI,CAAC,UAAU,GAAG,GAAG,CAAC,IAAI,CAAC;QAC7B,CAAC,CAAC,CAAC;IACL,CAAC;IAED,QAAQ;QACN,IAAI,CAAC,KAAK,GAAG;YACb,MAAM,EAAE,EAAE;YACV,QAAQ,EAAE,EAAE;YACZ,YAAY,EAAE,EAAE;YAChB,cAAc,EAAE,CAAC;YACjB,aAAa,EAAE,CAAC;SACf,CAAC;QACF,IAAI,CAAC,UAAU,EAAE,CAAC;QAClB,IAAI,CAAC,cAAc,GAAG;YACpB,EAAE,EAAE,GAAG;YACP,UAAU,EAAE,GAAG;YACf,MAAM,EAAE,EAAE;YACV,MAAM,EAAE,CAAC;YACT,UAAU,EAAE,EAAE;YACd,UAAU,EAAE,EAAE;SACf,CAAC;QACF,IAAI,CAAC,GAAG,GAAG,IAAI,CAAC;QAChB,IAAI,CAAC,UAAU,EAAE,CAAC;IACpB,CAAC;IAED,SAAS,CAAC,IAAY;QACpB,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;QAClB,IAAI,CAAC,UAAU,EAAE,CAAC;QAClB,IAAI,CAAC,GAAG,GAAG,KAAK,CAAC;QACjB,IAAI,CAAC,UAAU,EAAE,CAAC;IACpB,CAAC;IAED,UAAU;QACR,IAAI,CAAC,IAAI,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC;IACzB,CAAC;;4EAxGU,cAAc;8FAAd,cAAc;QCb3B,yEAA6B;QACzB,0GAMM;QACN,0GAWM;QACV,4DAAM;;QAnBI,0DAAW;QAAX,2EAAW;QAOX,0DAAU;QAAV,0EAAU;;;;;;;;;;;;;;ACPpB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA+C;AAEa;AACN;AACH;;AAW5C,MAAM,WAAW;;sEAAX,WAAW;0FAAX,WAAW;8FANb;YACP,4DAAY;YACZ,wEAAkB;YAClB,mEAAU;SACX;mIAEU,WAAW,mBAPP,+DAAc,aAE3B,4DAAY;QACZ,wEAAkB;QAClB,mEAAU","file":"pages-cupon-cupon-module.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport { CuponComponent } from './cupon.component';\n\nconst routes: Routes = [{\n  path: '',\n  component: CuponComponent\n}];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class CuponRoutingModule { }\n","import { HttpClient } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { environment } from 'src/environments/environment';\nimport { ICupon } from '../models/ICupon';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class CuponService {\n\n  private apiURL = environment.apiURL;\n\n  constructor( private httpClient: HttpClient) { }\n\n  getCupones(): any {\n    return this.httpClient.get(this.apiURL + 'inscripciones/lista-cuponesDescuento/');\n  }\n\n  getCuponByCodigo(codigo: string): any {\n    return this.httpClient.get(this.apiURL + 'inscripciones/devolver-cuponDescuento/?codigoCupon=' + codigo);\n  }\n\n  postCupon(cupon: ICupon): any {\n    return this.httpClient.post(this.apiURL + 'inscripciones/crear-cuponDescuento/', cupon);\n  }\n\n  putCupon(cupon: ICupon): any {\n    return this.httpClient.put(this.apiURL + 'inscripciones/editar-cuponDescuento/?codigoCupon=' + cupon.codigo, cupon);\n  }\n\n  deleteCupon(cupon: ICupon): any {\n    return this.httpClient.delete(this.apiURL + 'inscripciones/eliminar-cuponDescuento/?codigoCupon=' + cupon.codigo);\n  }\n\n  verifyCupon(codigo: string): any {\n    return this.httpClient.get(this.apiURL + 'inscripciones/verificar-cuponDescuento/?cuponDescuento=' + codigo);\n  }\n\n  validateCode(codigo: string): any {\n    return this.httpClient.get(this.apiURL + 'inscripciones/verificar-codigoCupon/?cuponDescuento=' + codigo);\n  }\n\n}\n","import { Component, OnInit } from '@angular/core';\nimport { ITarifa } from 'src/app/core/models/ITarifa';\nimport { CuponService } from 'src/app/core/services/cupon.service';\nimport { TarifasService } from 'src/app/core/services/tarifas.service';\nimport { ToastrService } from 'ngx-toastr';\nimport { ICupon } from 'src/app/core/models/ICupon';\nimport { CustomToastComponent } from 'src/app/core/components/custom-toast/custom-toast.component';\n\n@Component({\n  selector: 'app-cupon',\n  templateUrl: './cupon.component.html',\n  styleUrls: ['./cupon.component.css']\n})\nexport class CuponComponent implements OnInit {\n\n  edit = false;\n  new = false;\n  message = {header: '', body: ''};\n  cupon: ICupon;\n  cuponList: ICupon[];\n  tarifaList = [];\n  selectedTarifa: ITarifa;\n  codeValidation = '';\n\n  constructor(private cuponService: CuponService,\n              private tarifaService: TarifasService,\n              private toastr: ToastrService) { }\n\n  ngOnInit(): void {\n    this.getCupones();\n  }\n\n  getCupones(): void {\n    this.cuponList = [];\n    this.cuponService.getCupones().subscribe((res: any) => {\n      this.cuponList = res.data;\n    });\n  }\n\n  postCupon(item): void {\n    this.cuponService.postCupon(item).subscribe((res: any) => {\n      this.getCupones();\n      this.toggleEdit();\n    });\n  }\n\n  putCupon(item): void {\n    this.cuponService.putCupon(item).subscribe((res: any) => {\n      this.getCupones();\n      this.toggleEdit();\n    });\n  }\n\n  deleteCupon(cupon): void {\n    this.toastr.show( '¿Seguro que deseas borrar el cupón ' + cupon.codigo + '?', 'Borrar Cupón', {\n        toastComponent: CustomToastComponent,\n        disableTimeOut: true,\n        tapToDismiss: false,\n        enableHtml: true\n      })\n      .onAction.subscribe(() => {\n        this.cuponService.deleteCupon(cupon).subscribe((res: any) => {\n          this.getCupones();\n        });\n      });\n  }\n\n  verificarCupon(codigo): void {\n    this.cuponService.verifyCupon(codigo).subscribe((res: any) => {\n    });\n  }\n\n  validarCodigoCupon(codigo): void {\n    this.cuponService.validateCode(codigo).subscribe(\n      res => {this.toastr.success('Código válido.');\n              this.codeValidation = res.status; },\n      err => {this.toastr.warning('El código ya existe.');\n              this.codeValidation = err.status; });\n  }\n\n  getTarifas(): void {\n    this.tarifaList = [];\n    this.tarifaService.getTarifas().subscribe((res: any) => {\n      this.tarifaList = res.data;\n    });\n  }\n\n  newCupon(): void {\n    this.cupon = {\n    codigo: '',\n    idTarifa: '',\n    nombreTarifa: '',\n    porcentajeDesc: 0,\n    usosRestantes: 0\n    };\n    this.getTarifas();\n    this.selectedTarifa = {\n      id: '0',\n      idCongreso: '0',\n      nombre: '',\n      precio: 0,\n      fechaDesde: '',\n      fechaHasta: ''\n    };\n    this.new = true;\n    this.toggleEdit();\n  }\n\n  editCupon(item: ICupon): void {\n    this.cupon = item;\n    this.getTarifas();\n    this.new = false;\n    this.toggleEdit();\n  }\n\n  toggleEdit(): void {\n    this.edit = !this.edit;\n  }\n}\n","<div class=\"container-fluid\">\n    <div *ngIf=\"!edit\">\n        <app-cupon-list [cuponList]=\"cuponList\"\n        (crearCuponEvent)=\"newCupon($event)\" \n        (editarCuponEvent)=\"editCupon($event)\" \n        (eliminarCuponEvent)=\"deleteCupon($event)\">\n        </app-cupon-list>\n    </div>\n    <div *ngIf=\"edit\">\n        <app-cupon-form [new]=\"new\"\n                        [cupon]=\"cupon\"\n                        [tarifaList]=\"tarifaList\"\n                        [selectedTarifa]=\"selectedTarifa\"\n                        [codeValidation]=\"codeValidation\"\n                        (newCuponEvent)=\"postCupon($event)\" \n                        (editCuponEvent)=\"putCupon($event)\"\n                        (validarCodigoCuponEvent)=\"validarCodigoCupon($event)\"\n                        (cancelEvent)=\"toggleEdit($event)\">\n        </app-cupon-form>\n    </div>\n</div>\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { CuponRoutingModule } from './cupon-routing.module';\nimport { CoreModule } from 'src/app/core/core.module';\nimport { CuponComponent } from './cupon.component';\n\n\n@NgModule({\n  declarations: [CuponComponent],\n  imports: [\n    CommonModule,\n    CuponRoutingModule,\n    CoreModule\n  ]\n})\nexport class CuponModule { }\n"],"sourceRoot":"webpack:///"}