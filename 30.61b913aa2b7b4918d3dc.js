(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{ITub:function(t,e,o){"use strict";o.r(e),o.d(e,"EvaluatorsModule",function(){return R});var r=o("ofXK"),i=o("tyNb"),a=o("fXoL"),s=o("3Pt+"),n=o("y6im"),c=o("f4AX"),l=o("5eHb"),b=o("bcAm");function d(t,e){if(1&t){const t=a.Sb();a.Rb(0,"div",22),a.Rb(1,"a",23),a.bc("click",function(){return a.Bc(t),a.dc().toggleNew()}),a.Jc(2,"Nuevo Evaluador"),a.Qb(),a.Qb()}}function u(t,e){if(1&t&&(a.Rb(0,"option",35),a.Jc(1),a.Qb()),2&t){const t=e.$implicit;a.mc("value",t.email),a.Ab(1),a.Mc("",t.nombre," ",t.apellido," ")}}const m=function(t){return{"is-invalid":t}};function h(t,e){if(1&t){const t=a.Sb();a.Rb(0,"div",22),a.Rb(1,"form",24),a.Rb(2,"div",25),a.Rb(3,"h5",26),a.Jc(4,"Agregar Evaluador"),a.Qb(),a.Rb(5,"p",27),a.Jc(6,"Se enviar\xe1 un correo de invitaci\xf3n al usuario para que sea evaluador."),a.Qb(),a.Nb(7,"input",28),a.Rb(8,"datalist",29),a.Hc(9,u,2,3,"option",30),a.Qb(),a.Nb(10,"br"),a.Rb(11,"a",31),a.bc("click",function(){return a.Bc(t),a.dc().toggleNew()}),a.Jc(12,"Cancelar"),a.Qb(),a.Jc(13," \xa0 "),a.Rb(14,"a",32),a.bc("click",function(){return a.Bc(t),a.dc().sendMail()}),a.Jc(15," Enviar correo \xa0 "),a.Nb(16,"i",33),a.Qb(),a.Nb(17,"button",34),a.Qb(),a.Qb(),a.Qb()}if(2&t){const t=a.dc();a.Ab(1),a.lc("formGroup",t.formEvaluator),a.Ab(6),a.lc("ngClass",a.qc(3,m,t.submitted&&t.formEvaluator.controls.correo.errors)),a.Ab(2),a.lc("ngForOf",t.usersList)}}function f(t,e){if(1&t){const t=a.Sb();a.Rb(0,"tr",36),a.Rb(1,"td"),a.Jc(2),a.Qb(),a.Rb(3,"td"),a.Jc(4),a.Qb(),a.Rb(5,"td"),a.Rb(6,"a",37),a.bc("click",function(){a.Bc(t);const o=e.$implicit;return a.dc().deleteEvaluator(o)}),a.Nb(7,"i",38),a.Qb(),a.Qb(),a.Qb()}if(2&t){const t=e.$implicit;a.Ab(2),a.Kc(t.nombre),a.Ab(2),a.Kc(t.email)}}let v=(()=>{class t{constructor(t,e,o,r){this.evaluatorService=t,this.userService=e,this.formBuilder=o,this.toast=r,this.submitted=!1,this.new=!1,this.showList=[],this.evaluatorsList=[]}ngOnInit(){this.formEvaluator=this.formBuilder.group({correo:["",[s.o.required]]}),this.fillEvaluatorsList(),this.getUsers()}sendMail(){if(this.submitted=!0,this.formEvaluator.valid){const t=this.searchByEmail(this.formEvaluator.controls.correo.value);if(null==t)return void this.showMessage("Error","El correo ingresado no pertenece a un usuario registrado.");const e=t.id.toString();this.evaluatorService.postEvaluator(e.toString()).subscribe(t=>{null!=t.data?(this.showMessage("\xa1Correo enviado!",t.data),this.submitted=!1,this.toggleNew()):this.showMessage("Error",t.error)})}}fillEvaluatorsList(){this.evaluatorService.getEvaluators(0).subscribe(t=>{this.evaluatorsList=t.data,this.showList=t.data})}showMessage(t,e){this.messageHeader=t,this.messageBody=e,document.getElementById("modalCorreo").click()}searchByEmail(t){for(let e=0;e<this.usersList.length;e++)if(t===this.usersList[e].email)return this.usersList[e];return null}getUsers(){this.userService.getAllUsers().subscribe(t=>{this.usersList=t})}deleteEvaluator(t){confirm("Seguro desea eliminar el evaluador: "+t.nombre)&&this.evaluatorService.deleteIdEvaluator(t.idUsuario).subscribe(e=>{this.evaluatorsList=this.evaluatorsList.filter(e=>{if(e.idUsuario!==t.idUsuario)return e}),this.showList=this.evaluatorsList.slice(),this.toast.success("Evaluador Eliminado")})}setDeleteEvaluator(t){console.log(t),this.index=t,this.deleteEvName=this.evaluatorsList[t].nombre}toggleNew(){this.submitted=!1,this.new=!this.new}search(t){this.showList=t}}return t.\u0275fac=function(e){return new(e||t)(a.Mb(n.a),a.Mb(c.a),a.Mb(s.b),a.Mb(l.d))},t.\u0275cmp=a.Gb({type:t,selectors:[["app-evaluator-list"]],decls:37,vars:7,consts:[[1,"container-fluid"],[1,"contenidos"],[1,"text-center"],["id","backdrop",1,"modal-backdrop","fade","show",2,"display","none"],["class","row justify-content-md-end",4,"ngIf"],[1,"row","justify-content-md-center"],[1,"col-md-8",3,"fullList","attribFilter","listEvent"],[1,"row"],[1,"table","text-center","table-hover","table-bordered"],[1,"thead"],[1,"col-md-4"],[1,"col-md-2"],["class","align-items-center",4,"ngFor","ngForOf"],["id","modal-correo","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"],[1,"row","justify-content-md-end"],["role","button",1,"btn","btn-primary","col-sm-2",3,"click"],[1,"card","col-md-4",3,"formGroup"],[1,"card-body"],[1,"card-title"],[1,"card-text"],["list","correos","placeholder","Buscar por nombre o direcci\xf3n de correo","formControlName","correo",1,"form-control",3,"ngClass"],["id","correos"],[3,"value",4,"ngFor","ngForOf"],["role","button",1,"btn","btn-secondary",3,"click"],["role","button",1,"btn","btn-primary",3,"click"],[1,"fas","fa-envelope"],["hidden","","id","modalCorreo","data-bs-toggle","modal","data-bs-target","#modal-correo"],[3,"value"],[1,"align-items-center"],["title","Eliminar","role","button",3,"click"],[1,"fas","fa-trash","fa-lg"]],template:function(t,e){1&t&&(a.Rb(0,"div",0),a.Rb(1,"div",1),a.Nb(2,"hr"),a.Rb(3,"h3",2),a.Jc(4,"Evaluadores Activos"),a.Qb(),a.Nb(5,"hr"),a.Qb(),a.Nb(6,"div",3),a.Hc(7,d,3,0,"div",4),a.Hc(8,h,18,5,"div",4),a.Nb(9,"br"),a.Rb(10,"div",5),a.Rb(11,"app-search",6),a.bc("listEvent",function(t){return e.search(t)}),a.Qb(),a.Qb(),a.Rb(12,"div",7),a.Rb(13,"table",8),a.Rb(14,"thead",9),a.Rb(15,"tr"),a.Rb(16,"th",10),a.Jc(17,"Nombre"),a.Qb(),a.Rb(18,"th",10),a.Jc(19,"E-mail"),a.Qb(),a.Rb(20,"th",11),a.Jc(21,"Acciones"),a.Qb(),a.Qb(),a.Qb(),a.Rb(22,"tbody"),a.Hc(23,f,8,2,"tr",12),a.Qb(),a.Qb(),a.Qb(),a.Rb(24,"div"),a.Rb(25,"div",13),a.Rb(26,"div",14),a.Rb(27,"div",15),a.Rb(28,"div",16),a.Rb(29,"h5",17),a.Jc(30),a.Qb(),a.Nb(31,"button",18),a.Qb(),a.Rb(32,"div",19),a.Jc(33),a.Qb(),a.Rb(34,"div",20),a.Rb(35,"a",21),a.Jc(36,"Aceptar"),a.Qb(),a.Qb(),a.Qb(),a.Qb(),a.Qb(),a.Qb(),a.Qb()),2&t&&(a.Ab(7),a.lc("ngIf",!e.new),a.Ab(1),a.lc("ngIf",e.new),a.Ab(3),a.lc("fullList",e.evaluatorsList)("attribFilter","nombre"),a.Ab(12),a.lc("ngForOf",e.showList),a.Ab(7),a.Kc(e.messageHeader),a.Ab(3),a.Lc(" ",e.messageBody," "))},directives:[r.o,b.a,r.n,s.p,s.i,s.d,s.a,s.h,s.c,r.m,s.k,s.q],styles:[".container-fluid[_ngcontent-%COMP%]{background-color:#f4f4f4}.contenidos[_ngcontent-%COMP%]{padding-bottom:3rem}.thead[_ngcontent-%COMP%]{background-color:#c8e5f1}.btn[_ngcontent-%COMP%]{border:none}.btn-primary[_ngcontent-%COMP%]{background-color:#3cafe0}.btn-primary[_ngcontent-%COMP%]:hover{background-color:#3994bb}.fa-envelope[_ngcontent-%COMP%]{color:#fff}.fa-trash[_ngcontent-%COMP%]{color:#3cafe0}.fa-trash[_ngcontent-%COMP%]:hover{color:#3994bb;cursor:pointer}hr[_ngcontent-%COMP%]{border:1px solid #00609c}@media (min-width:768px){hr[_ngcontent-%COMP%]{margin-left:25%;margin-right:25%}.container-fluid[_ngcontent-%COMP%]{padding:5rem}}"]}),t})();const g=[{path:"",component:(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=a.Gb({type:t,selectors:[["app-evaluators"]],decls:1,vars:0,template:function(t,e){1&t&&a.Nb(0,"app-evaluator-list")},directives:[v],styles:[""]}),t})()}];let p=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=a.Kb({type:t}),t.\u0275inj=a.Jb({imports:[[i.d.forChild(g)],i.d]}),t})();var Q=o("pKmL");let R=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=a.Kb({type:t}),t.\u0275inj=a.Jb({imports:[[r.c,p,Q.a]]}),t})()}}]);