{"version":3,"sources":["./src/app/core/services/evaluate-paper.service.ts","./src/app/pages/evaluate-article/evaluate-article.component.ts","./src/app/pages/evaluate-article/evaluate-article.component.html","./src/app/pages/evaluate-article/evaluate-article.component.css","./src/app/pages/evaluate-article/evaluate-article-routing.module.ts","./src/app/pages/evaluate-article/evaluate-article.module.ts"],"names":["httpClient","apiURL","environment","ev","this","put","get","idArticulo","evaluacion","providedIn","EvaluateArticleComponent","paperEvalService","evaluationService","toastr","paperService","router","paperList","paper","items","flagEvaluate","ok","getPapers","getPaperEval","subscribe","res","data","getTest","id","getPaperFile","blob","Blob","type","url","window","URL","createObjectURL","link","document","createElement","undefined","download","setAttribute","style","visibility","body","appendChild","click","removeChild","editarEvaluacion","submit","submitEvaluation","success","setTimeout","location","reload","enviarEvaluacion","toggleFlagEvaluate","acceptEvaluationPaper","cancelarEvaluationPaper","selector","template","routes","path","component","EvaluateArticleRoutingModule","imports","forChild","exports","EvaluateArticleModule","declarations","schemas"],"mappings":"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","file":"31.js","sourcesContent":["import { HttpClient } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { environment } from 'src/environments/environment';\nimport { IEvalPaper } from '../models/IEvalPaper';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class EvaluatePaperService {\n\n  private apiURL = environment.apiURL;\n\n  constructor(private httpClient: HttpClient,\n              ) { }\n\n  enviarEvaluacion(ev): any {\n    return this.httpClient.put<IEvalPaper>(this.apiURL + 'articulos/enviar-evaluacion/', ev);\n  }\n\n  getPaperEval(): any {\n    return this.httpClient.get(this.apiURL + 'articulos/consulta-evaluaciones/');\n  }\n\n  editarEvaluacion(ev): any {\n    return this.httpClient.put(this.apiURL + 'articulos/editar-evaluacion/?idArticulo=' + ev.idArticulo, ev.evaluacion);\n  }\n\n  getEvaluaciones(idArticulo): any {\n    return this.httpClient.get(this.apiURL + 'articulos/consultaDetalleEvaluacion/?idArticulo=' + idArticulo);\n  }\n\n  getTest(idArticulo): any {\n    return this.httpClient.get(this.apiURL + 'articulos/consulta-evaluacion/?idArticulo=' + idArticulo);\n  }\n}\n","import { Component, OnInit } from '@angular/core';\nimport { ToastrService } from 'ngx-toastr';\nimport { EvaluatePaperService } from 'src/app/core/services/evaluate-paper.service';\nimport { PaperService } from 'src/app/core/services/paper.service';\nimport { EvaluatorService } from 'src/app/core/services/evaluator.service';\nimport { Router } from '@angular/router';\n\n\n@Component({\n  selector: 'app-evaluate-article',\n  templateUrl: './evaluate-article.component.html',\n  styleUrls: ['./evaluate-article.component.css']\n})\nexport class EvaluateArticleComponent implements OnInit {\n\n\n  paperList = [];\n  paper = [];\n  items = [];\n  flagEvaluate = false;\n  ok = false;\n\n\n  constructor(private paperEvalService: EvaluatePaperService,\n              private evaluationService: EvaluatorService,\n              private toastr: ToastrService,\n              private paperService: PaperService,\n              private router: Router) { }\n\n\n  ngOnInit(): void {\n    this.getPapers();\n  }\n\n  getPapers(): void {\n    this.paperEvalService.getPaperEval().subscribe((res: any) => {\n      this.paperList = res.data;\n      this.ok = true;\n    });\n  }\n\n  getItems(idArticulo): void {\n    this.paperEvalService.getTest(idArticulo).subscribe((res: any) => {\n      this.items = res.data;\n    });\n  }\n\n  evaluate(paper): void {\n    this.paper = paper;\n    this.flagEvaluate = !this.flagEvaluate;\n  }\n\n  getFile(id): void {\n    this.paperService.getPaperFile(id).subscribe((res: any) => {\n      const archivo: ArrayBuffer = res;\n      const blob = new Blob([archivo], { type: 'application/pdf' });\n      const url = window.URL.createObjectURL(blob);\n      const link = document.createElement('a');\n      if (link.download !== undefined) {\n        link.setAttribute('href', url);\n        link.setAttribute('target', '_blank');\n        link.style.visibility = 'hidden';\n        document.body.appendChild(link);\n        link.click();\n        document.body.removeChild(link);\n      }\n    });\n  }\n\n  toggleFlagEvaluate(): void {\n    this.flagEvaluate = !this.flagEvaluate;\n  }\n\n  saveEvaluation(ev: any): void {\n    this.paperEvalService.editarEvaluacion(ev).subscribe((res: any) => {\n      if (ev.submit) {\n        this.submitEvaluation(ev);\n        return;\n      } else {\n        this.getPapers();\n        this.toastr.success('La evaluaci贸n ha sido guardada!');\n        setTimeout(() => {window.location.reload(); }, 200);\n      }\n    });\n  }\n\n  submitEvaluation(ev): void {\n    this.paperEvalService.enviarEvaluacion(ev).subscribe((res: any) => {\n      this.toastr.success('La evaluaci贸n ha sido enviada!');\n      this.toggleFlagEvaluate();\n      this.getPapers();\n      setTimeout(() => {window.location.reload(); }, 200);\n    });\n  }\n\n  acceptEvaluate(paper): void {\n    this.paper = paper;\n    this.evaluationService.acceptEvaluationPaper(this.paper).subscribe(\n      (res: any) => {this.toastr.success('La evaluaci贸n ha sido aceptada.'); }\n    );\n   }\n\n  cancelEvaluate(paper): void {\n    this.paper = paper;\n    this.evaluationService.cancelarEvaluationPaper(this.paper).subscribe(\n      (res: any) => {this.toastr.success('La evaluaci贸n ha sido rechazada.'); }\n      );\n  }\n}\n","export default \"<div class=\\\"container-fluid\\\">\\n  <app-evaluate-paper-list *ngIf=\\\"!flagEvaluate && ok\\\"\\n   [paperList]='paperList'\\n   (EvaluationEvent)='evaluate($event)'\\n   (EvaluationAcceptEvent)='evaluate($event)'\\n   (EvaluationCancelEvent)='evaluate($event)'>\\n</app-evaluate-paper-list>\\n  <app-evaluate-paper-form *ngIf=\\\"flagEvaluate\\\"\\n  [paper]='paper'\\n  [items]=\\\"items\\\"\\n  (GetItemsEvent)=\\\"getItems($event)\\\"\\n  (GetFileEvent)=\\\"getFile($event)\\\"\\n  (SaveEvent)=\\\"saveEvaluation($event)\\\"\\n  (CancelEvent)=\\\"toggleFlagEvaluate($event)\\\">\\n  </app-evaluate-paper-form>\\n</div>\\n\\n\";","export default \"\";","import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport { EvaluateArticleComponent } from './evaluate-article.component';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: EvaluateArticleComponent\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class EvaluateArticleRoutingModule { }\n","import { CUSTOM_ELEMENTS_SCHEMA, NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { EvaluateArticleRoutingModule } from './evaluate-article-routing.module';\nimport { EvaluateArticleComponent } from './evaluate-article.component';\nimport { CoreModule } from 'src/app/core/core.module';\n\n\n@NgModule({\n  declarations: [EvaluateArticleComponent],\n  imports: [\n    CommonModule,\n    EvaluateArticleRoutingModule,\n    CoreModule\n  ],\n  schemas: [CUSTOM_ELEMENTS_SCHEMA]\n})\nexport class EvaluateArticleModule { }\n"],"sourceRoot":"webpack:///"}