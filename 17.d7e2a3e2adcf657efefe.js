(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{w8Di:function(t,s,e){"use strict";e.r(s),e.d(s,"AssistantModule",function(){return y});var n=e("ofXK"),i=e("tyNb"),r=e("fXoL"),o=e("3Pt+"),c=e("KaZm"),a=e("7biO"),b=e("f4AX"),l=e("5eHb"),d=e("bcAm");function u(t,s){if(1&t){const t=r.Sb();r.Rb(0,"div",13),r.Rb(1,"a",14),r.bc("click",function(){return r.Bc(t),r.dc().toggleNew()}),r.Jc(2,"Nuevo Ayudante"),r.Qb(),r.Qb()}}function f(t,s){if(1&t&&(r.Rb(0,"option",25),r.Jc(1),r.Qb()),2&t){const t=s.$implicit;r.mc("value",t.email),r.Ab(1),r.Mc("",t.nombre," ",t.apellido," ")}}const m=function(t){return{"is-invalid":t}};function h(t,s){if(1&t){const t=r.Sb();r.Rb(0,"div",13),r.Rb(1,"form",15),r.Rb(2,"div",16),r.Rb(3,"h5",17),r.Jc(4,"Agregar Ayudante"),r.Qb(),r.Rb(5,"p",18),r.Jc(6,"Se enviar\xe1 un correo de invitaci\xf3n al usuario para que sea ayudante en el congreso."),r.Qb(),r.Nb(7,"input",19),r.Rb(8,"datalist",20),r.Hc(9,f,2,3,"option",21),r.Qb(),r.Nb(10,"br"),r.Rb(11,"a",22),r.bc("click",function(){return r.Bc(t),r.dc().toggleNew()}),r.Jc(12,"Cancelar"),r.Qb(),r.Jc(13," \xa0 "),r.Rb(14,"a",23),r.bc("click",function(){return r.Bc(t),r.dc().sendMail()}),r.Jc(15," Enviar correo \xa0 "),r.Nb(16,"i",24),r.Qb(),r.Qb(),r.Qb(),r.Qb()}if(2&t){const t=r.dc();r.Ab(1),r.lc("formGroup",t.formAssistant),r.Ab(6),r.lc("ngClass",r.qc(3,m,t.submitted&&t.formAssistant.controls.correo.errors)),r.Ab(2),r.lc("ngForOf",t.usersList)}}function p(t,s){if(1&t){const t=r.Sb();r.Rb(0,"tr",26),r.Rb(1,"td"),r.Jc(2),r.Qb(),r.Rb(3,"td"),r.Jc(4),r.Qb(),r.Rb(5,"td"),r.Rb(6,"a",27),r.bc("click",function(){r.Bc(t);const e=s.$implicit,n=s.index;return r.dc().deleteAssistant(e,n)}),r.Nb(7,"i",28),r.Qb(),r.Qb(),r.Qb()}if(2&t){const t=s.$implicit;r.Ab(2),r.Kc(t.nombre),r.Ab(2),r.Kc(t.email)}}let g=(()=>{class t{constructor(t,s,e,n){this.assistantService=t,this.userService=s,this.formBuilder=e,this.toast=n,this.submitted=!1,this.new=!1,this.showList=[]}ngOnInit(){this.formAssistant=this.formBuilder.group({correo:["",[o.p.required,o.p.email]]}),this.fillAssistantList(),this.getUsers()}sendMail(){if(this.submitted=!0,this.formAssistant.invalid)return;const t=this.formAssistant.controls.correo.value,s=this.searchByEmail(t);null!=s?this.assistantService.asignarRolAyudante(s).subscribe(s=>{null!=s.data?(this.toast.success("Se envi\xf3 un correo a "+t),this.submitted=!1,this.toggleNew()):this.toast.error("Error",s.error)}):this.toast.warning("Atenci\xf3n","El correo ingresado no pertenece a un usuario registrado.")}fillAssistantList(){this.assistantService.getAyudantes().subscribe(t=>{this.assistantList=t.data,this.showList=t.data})}getUsers(){this.userService.getAllUsers().subscribe(t=>{this.usersList=t})}deleteAssistant(t){this.toast.show("\xbfSeguro que deseas borrar al ayudante "+t.nombre+"?","Borrar Ayudante",{toastComponent:c.a,disableTimeOut:!0,tapToDismiss:!1,enableHtml:!0}).onAction.subscribe(()=>{this.assistantService.deleteAyudante(t).subscribe(s=>{this.assistantList=this.assistantList.filter(s=>{if(s.idUsuario!==t.idUsuario)return s}),this.showList=this.assistantList.slice(),this.toast.success("Ayudante Eliminado")})})}searchByEmail(t){for(let s=0;s<this.usersList.length;s++)if(t===this.usersList[s].email)return this.usersList[s];return null}toggleNew(){this.submitted=!1,this.new=!this.new}search(t){this.showList=t}}return t.\u0275fac=function(s){return new(s||t)(r.Mb(a.a),r.Mb(b.a),r.Mb(o.b),r.Mb(l.d))},t.\u0275cmp=r.Gb({type:t,selectors:[["app-assistant-list"]],decls:25,vars:5,consts:[[1,"container-fluid"],[1,"contenidos"],[1,"text-center"],["id","backdrop",1,"modal-backdrop","fade","show",2,"display","none"],["class","row justify-content-md-end",4,"ngIf"],[1,"row","justify-content-md-center"],[1,"col-md-8",3,"fullList","attribFilter","listEvent"],[1,"row"],[1,"table","text-center","table-hover","table-bordered"],[1,"thead"],[1,"col-md-4"],[1,"col-md-1"],["class","align-items-center",4,"ngFor","ngForOf"],[1,"row","justify-content-md-end"],["role","button",1,"btn","btn-primary","col-sm-2",3,"click"],[1,"card","col-md-4",3,"formGroup"],[1,"card-body"],[1,"card-title"],[1,"card-text"],["list","correos","type","email","placeholder","Buscar por nombre o direcci\xf3n de correo","formControlName","correo",1,"form-control",3,"ngClass"],["id","correos"],[3,"value",4,"ngFor","ngForOf"],["role","button",1,"btn","btn-secondary",3,"click"],["role","button",1,"btn","btn-primary",3,"click"],[1,"fas","fa-envelope"],[3,"value"],[1,"align-items-center"],["title","Eliminar","role","button",3,"click"],[1,"fas","fa-trash","fa-lg"]],template:function(t,s){1&t&&(r.Rb(0,"div",0),r.Rb(1,"div",1),r.Nb(2,"hr"),r.Rb(3,"h3",2),r.Jc(4,"Ayudantes del Congreso"),r.Qb(),r.Nb(5,"hr"),r.Qb(),r.Nb(6,"div",3),r.Hc(7,u,3,0,"div",4),r.Hc(8,h,17,5,"div",4),r.Nb(9,"br"),r.Rb(10,"div",5),r.Rb(11,"app-search",6),r.bc("listEvent",function(t){return s.search(t)}),r.Qb(),r.Qb(),r.Rb(12,"div",7),r.Rb(13,"table",8),r.Rb(14,"thead",9),r.Rb(15,"tr"),r.Rb(16,"th",10),r.Jc(17,"Nombre"),r.Qb(),r.Rb(18,"th",10),r.Jc(19,"E-mail"),r.Qb(),r.Rb(20,"th",11),r.Jc(21,"Acciones"),r.Qb(),r.Qb(),r.Qb(),r.Rb(22,"tbody"),r.Hc(23,p,8,2,"tr",12),r.Qb(),r.Qb(),r.Qb(),r.Nb(24,"div"),r.Qb()),2&t&&(r.Ab(7),r.lc("ngIf",!s.new),r.Ab(1),r.lc("ngIf",s.new),r.Ab(3),r.lc("fullList",s.assistantList)("attribFilter","nombre"),r.Ab(12),r.lc("ngForOf",s.showList))},directives:[n.o,d.a,n.n,o.q,o.j,o.d,o.a,o.i,o.c,n.m,o.l,o.r],styles:["@media (min-width:768px){hr[_ngcontent-%COMP%]{margin-left:25%;margin-right:25%;border:1px solid #00609c}.container-fluid[_ngcontent-%COMP%]{padding:5rem;background-color:#f4f4f4}}.contenidos[_ngcontent-%COMP%]{padding-bottom:3rem}.thead[_ngcontent-%COMP%]{background-color:#c8e5f1}.btn[_ngcontent-%COMP%]{border:none}.btn-primary[_ngcontent-%COMP%]{background-color:#3cafe0}.btn-primary[_ngcontent-%COMP%]:hover{background-color:#3994bb}.fa-envelope[_ngcontent-%COMP%]{color:#fff}.fa-trash[_ngcontent-%COMP%]{color:#3cafe0}.fa-trash[_ngcontent-%COMP%]:hover{color:#3994bb;cursor:pointer}"]}),t})();const v=[{path:"",component:(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(s){return new(s||t)},t.\u0275cmp=r.Gb({type:t,selectors:[["app-assistant"]],decls:1,vars:0,template:function(t,s){1&t&&r.Nb(0,"app-assistant-list")},directives:[g],styles:[""]}),t})()}];let A=(()=>{class t{}return t.\u0275fac=function(s){return new(s||t)},t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({imports:[[i.d.forChild(v)],i.d]}),t})();var w=e("pKmL");let y=(()=>{class t{}return t.\u0275fac=function(s){return new(s||t)},t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({imports:[[n.c,A,w.a]]}),t})()}}]);