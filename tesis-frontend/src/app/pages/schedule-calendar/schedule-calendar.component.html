<div class="calendar-container" *ngIf="events">
  <div class="row mt-4">
    <div class="col-md-4 text-center">
      <h3 class="mt-0">{{ viewDate | calendarSchedulerDate:(view +
        'ViewTitle'):locale:weekStartsOn:excludeDays:viewDays:startsWithToday }}</h3>
    </div>
    <div class="col-md-4 text-right">
      <div class="btn-group m-1" role="group">
        <button type="button" class="btn btn-primary" mwlCalendarPreviousView [view]="view" [(viewDate)]="viewDate"
          [daysInWeek]="viewDays" [excludeDays]="excludeDays" [disabled]="prevBtnDisabled"
          (viewDateChange)="dateOrViewChanged()">
          <span class="valign-center">
            <i title="Precedente" class="material-icons md-18">keyboard_arrow_left</i>
          </span>
        </button>
        <button type="button" class="btn btn-light" mwlCalendarToday [(viewDate)]="viewDate"
          (viewDateChange)="dateOrViewChanged()">
          <span class="valign-center">
            <i title="Oggi" class="material-icons md-18">today</i>
          </span>
        </button>
        <button type="button" class="btn btn-primary" mwlCalendarNextView [view]="view" [(viewDate)]="viewDate"
          [daysInWeek]="viewDays" [excludeDays]="excludeDays" [disabled]="nextBtnDisabled"
          (viewDateChange)="dateOrViewChanged()">
          <span class="valign-center">
            <i title="Successivo" class="material-icons md-18">keyboard_arrow_right</i>
          </span>
        </button>
      </div>
    </div>
  </div>
  <br>
  <div [ngSwitch]="view">
    <calendar-scheduler-view *ngSwitchCase="CalendarView.Week" [viewDate]="viewDate" [events]="events" [locale]="locale"
      [viewDays]="viewDays" [weekStartsOn]="weekStartsOn" [excludeDays]="excludeDays"
      [startsWithToday]="startsWithToday" [hourSegments]="hourSegments" [dayStartHour]="dayStartHour"
      [dayEndHour]="dayEndHour" [dayModifier]="dayModifier" [hourModifier]="hourModifier"
      [segmentModifier]="segmentModifier" [eventModifier]="eventModifier" [showEventActions]="true"
      [showSegmentHour]="true" [zoomEventOnHover]="true" (hourClicked)="hourClicked($event.hour)"
      (segmentClicked)="segmentClicked('Clicked', $event.segment)"
      (eventClicked)="eventClicked('Clicked', $event.event)" [refresh]="refresh">
    </calendar-scheduler-view>
  </div>
</div>


<!-- Button trigger modal -->
<button type="button" hidden class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#eventModal"
  id='activar-modal'>
  Launch demo modal
</button>

<!-- Modal -->
<div class="modal fade" id="eventModal" tabindex="-1" aria-labelledby="eventModalLabel" aria-hidden="true"
  *ngIf="formEvento">
  <div class="modal-dialog  modal-xl">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="eventModalLabel">{{evento.id ? 'Editar Evento' : 'Nuevo Evento'}}</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <form [formGroup]='formEvento'>
          <!-- date -->
          <div class='form-group row'>
            <label class='col-form-label col-sm-2 col-sm-offset-2' for='date'>Fecha: </label>
            <div class='col-sm-6'>
              <label class='col-form-label col-sm-2 col-sm-offset-2' for='date'>{{evento.date}}</label>
            </div>
          </div>

          <div class="form-group row">
            <label class='col-form-label col-sm-2 col-md-offset-2' for='startHour'>Hora de inicio: <span
                class='text-danger'>*</span></label>
            <div class='col-sm-6 row'>
              <div class="col-md-3">
                <select class='col-sm-3 form-select' name="startHour" formControlName="startHour" [ngClass]="{'is-invalid': ((formEvento.controls.startHour.touched || submitted) && formEvento.controls.startHour.value === '')
            && formEvento.controls.startHour.errors}">
                  <option *ngFor="let opt of hours" value={{opt}}>
                    ‌{{ opt }}
                  </option>
                </select>
                <span class='text-danger'
                  *ngIf='(formEvento.controls.startHour.touched || submitted) && formEvento.controls.startHour.errors?.required'>
                  Requerido
                </span>
              </div>
              <div class="col-md-3">
                <select class='col-sm-3 form-select' name="startMinute" formControlName="startMinute" [ngClass]="{'is-invalid': ((formEvento.controls.startMinute.touched || submitted) && formEvento.controls.startMinute.value === '')
                  && formEvento.controls.startMinute.errors}">
                  <option *ngFor="let opt of minutes" value={{opt}}>
                    ‌{{ opt === 0 ? '00': opt }}
                  </option>
                </select>
                <span class='text-danger'
                  *ngIf='(formEvento.controls.startMinute.touched || submitted) && formEvento.controls.startMinute.errors?.required'>
                  Requerido
                </span>
              </div>
            </div>
          </div>

          <div class="form-group row">
            <label class='col-form-label col-sm-2 col-md-offset-2' for='endHour'>Hora de Fin: <span
                class='text-danger'>*</span></label>
            <div class='col-sm-6 row'>
              <div class="col-md-3">
                <select class='col-sm-3 form-select' name="endHour" formControlName="endHour" [ngClass]="{'is-invalid': ((formEvento.controls.endHour.touched || submitted) && formEvento.controls.endHour.value === '')
            && formEvento.controls.endHour.errors}">
                  <option *ngFor="let opt of hours" value={{opt}}>
                    ‌{{ opt }}
                  </option>
                </select>
                <span class='text-danger'
                  *ngIf='(formEvento.controls.endHour.touched || submitted) && formEvento.controls.endHour.errors?.required'>
                  Requerido
                </span>
              </div>
              <div class="col-md-3">
                <select class='col-sm-3 form-select' name="endMinute" formControlName="endMinute" [ngClass]="{'is-invalid': ((formEvento.controls.endMinute.touched || submitted) && formEvento.controls.endMinute.value === '')
                  && formEvento.controls.endMinute.errors}">
                  <option *ngFor="let opt of minutes" value={{opt}}>
                    ‌{{ opt === 0 ? '00': opt }}
                  </option>
                </select>
                <span class='text-danger'
                  *ngIf='(formEvento.controls.endMinute.touched || submitted) && formEvento.controls.endMinute.errors?.required'>
                  Requerido
                </span>
              </div>
            </div>
          </div>

          <!-- idSimposio -->
          <div class='form-group row'>
            <label class='col-form-label col-sm-2 col-sm-offset-2' for='idSimposio'>Simposio: <span
                class='text-danger'>*</span></label>
            <div class='col-sm-6'>
              <select class='col-sm-4 form-select' name="idSimposio" formControlName="idSimposio"
              (change)='simposioSeleccionado($event.target.value)'
              [ngClass]="{'is-invalid': ((formEvento.controls.idSimposio.touched || submitted) && formEvento.controls.idSimposio.value === '')
          && formEvento.controls.idSimposio.errors}">
                <option *ngFor="let opt of simposios" value={{opt.id}}>
                  ‌{{ opt.descripcion }}
                </option>
              </select>
              <span class='text-danger'
                *ngIf='(formEvento.controls.idSimposio.touched || submitted) && formEvento.controls.idSimposio.errors?.required'>
                Requerido
              </span>
            </div>
          </div>

          <!-- idPaper -->
          <div class='form-group row' *ngIf="paperList">
            <label class='col-form-label col-sm-2 col-sm-offset-2' for='idPaper'>Paper: <span
                class='text-danger'>*</span></label>
            <div class='col-sm-6'>
              <select class='col-sm-4 form-select' name="idPaper" formControlName="idPaper" [ngClass]="{'is-invalid': ((formEvento.controls.idPaper.touched || submitted) && formEvento.controls.idPaper.value === '')
          && formEvento.controls.idPaper.errors}">
                <option *ngFor="let opt of showList" value={{opt.idArticulo}}>
                  ‌{{ opt.nombreArticulo }}
                </option>
              </select>
              <span class='text-danger'
                *ngIf='(formEvento.controls.idPaper.touched || submitted) && formEvento.controls.idPaper.errors?.required'>
                Requerido
              </span>
            </div>
          </div>



          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
            <button type="button" class="btn btn-primary">{{evento.id ? 'Actualizar Evento' : 'Nuevo Evento'}}</button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>
