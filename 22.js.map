{"version":3,"sources":["./src/app/core/services/cupon.service.ts","./src/app/pages/cupon/cupon.component.ts","./src/app/pages/cupon/cupon.component.html","./src/app/pages/cupon/cupon.component.css","./src/app/pages/cupon/cupon-routing.module.ts","./src/app/pages/cupon/cupon.module.ts"],"names":["httpClient","apiURL","environment","this","get","codigo","cupon","post","put","delete","providedIn","cuponService","tarifaService","toastr","edit","new","message","header","body","tarifaList","codeValidation","getCupones","cuponList","subscribe","res","data","item","postCupon","toggleEdit","putCupon","show","toastComponent","disableTimeOut","tapToDismiss","enableHtml","onAction","deleteCupon","verifyCupon","validateCode","success","status","err","warning","getTarifas","idTarifa","nombreTarifa","porcentajeDesc","usosRestantes","selectedTarifa","id","idCongreso","nombre","precio","fechaDesde","fechaHasta","selector","template","routes","path","component","CuponRoutingModule","imports","forChild","exports","CuponModule","declarations"],"mappings":"6NAQa,EAAY,MAIvB,YAAqBA,GAAA,KAAAA,aAFb,KAAAC,OAASC,EAAA,EAAYD,OAI7B,aACE,OAAOE,KAAKH,WAAWI,IAAID,KAAKF,OAAS,yCAG3C,iBAAiBI,GACf,OAAOF,KAAKH,WAAWI,IAAID,KAAKF,OAAS,sDAAwDI,GAGnG,UAAUC,GACR,OAAOH,KAAKH,WAAWO,KAAKJ,KAAKF,OAAS,sCAAuCK,GAGnF,SAASA,GACP,OAAOH,KAAKH,WAAWQ,IAAIL,KAAKF,OAAS,oDAAsDK,EAAMD,OAAQC,GAG/G,YAAYA,GACV,OAAOH,KAAKH,WAAWS,OAAON,KAAKF,OAAS,sDAAwDK,EAAMD,QAG5G,YAAYA,GACV,OAAOF,KAAKH,WAAWI,IAAID,KAAKF,OAAS,0DAA4DI,GAGvG,aAAaA,GACX,OAAOF,KAAKH,WAAWI,IAAID,KAAKF,OAAS,uDAAyDI,K,4BAvC7F,MAQI,EAAY,aAHxB,YAAW,CACVK,WAAY,UAED,G,4CCKA,EAAc,MAWzB,YAAoBC,EACAC,EACAC,GAFA,KAAAF,eACA,KAAAC,gBACA,KAAAC,SAXpB,KAAAC,MAAO,EACP,KAAAC,KAAM,EACN,KAAAC,QAAU,CAACC,OAAQ,GAAIC,KAAM,IAG7B,KAAAC,WAAa,GAEb,KAAAC,eAAiB,GAMjB,WACEjB,KAAKkB,aAGP,aACElB,KAAKmB,UAAY,GACjBnB,KAAKQ,aAAaU,aAAaE,UAAWC,IACxCrB,KAAKmB,UAAYE,EAAIC,OAIzB,UAAUC,GACRvB,KAAKQ,aAAagB,UAAUD,GAAMH,UAAWC,IAC3CrB,KAAKkB,aACLlB,KAAKyB,eAIT,SAASF,GACPvB,KAAKQ,aAAakB,SAASH,GAAMH,UAAWC,IAC1CrB,KAAKkB,aACLlB,KAAKyB,eAIT,YAAYtB,GACVH,KAAKU,OAAOiB,KAAM,4CAAwCxB,EAAMD,OAAS,IAAK,kBAAgB,CAC1F0B,eAAgB,IAChBC,gBAAgB,EAChBC,cAAc,EACdC,YAAY,IAEbC,SAASZ,UAAU,KAClBpB,KAAKQ,aAAayB,YAAY9B,GAAOiB,UAAWC,IAC9CrB,KAAKkB,iBAKb,eAAehB,GACbF,KAAKQ,aAAa0B,YAAYhC,GAAQkB,UAAWC,OAInD,mBAAmBnB,GACjBF,KAAKQ,aAAa2B,aAAajC,GAAQkB,UACrCC,IAAQrB,KAAKU,OAAO0B,QAAQ,wBACpBpC,KAAKiB,eAAiBI,EAAIgB,QAClCC,IAAQtC,KAAKU,OAAO6B,QAAQ,2BACpBvC,KAAKiB,eAAiBqB,EAAID,SAGtC,aACErC,KAAKgB,WAAa,GAClBhB,KAAKS,cAAc+B,aAAapB,UAAWC,IACzCrB,KAAKgB,WAAaK,EAAIC,OAI1B,WACEtB,KAAKG,MAAQ,CACbD,OAAQ,GACRuC,SAAU,GACVC,aAAc,GACdC,eAAgB,EAChBC,cAAe,GAEf5C,KAAKwC,aACLxC,KAAK6C,eAAiB,CACpBC,GAAI,IACJC,WAAY,IACZC,OAAQ,GACRC,OAAQ,EACRC,WAAY,GACZC,WAAY,IAEdnD,KAAKY,KAAM,EACXZ,KAAKyB,aAGP,UAAUF,GACRvB,KAAKG,MAAQoB,EACbvB,KAAKwC,aACLxC,KAAKY,KAAM,EACXZ,KAAKyB,aAGP,aACEzB,KAAKW,MAAQX,KAAKW,O,4BAlHb,G,MACA,K,MACA,MASI,EAAc,aAL1B,YAAU,CACTyC,SAAU,YACVC,SCVa,82B,QCAA,OFaF,GGTb,MAAMC,EAAiB,CAAC,CACtBC,KAAM,GACNC,UAAW,I,IAOAC,EAAkB,QAAlBA,EAAkB,aAJ9B,YAAS,CACRC,QAAS,CAAC,IAAaC,SAASL,IAChCM,QAAS,CAAC,QAECH,G,oBCGAI,EAAW,QAAXA,EAAW,aARvB,YAAS,CACRC,aAAc,CAAC,GACfJ,QAAS,CACP,IACAD,EACA,QAGSI","file":"22.js","sourcesContent":["import { HttpClient } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { environment } from 'src/environments/environment';\nimport { ICupon } from '../models/ICupon';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class CuponService {\n\n  private apiURL = environment.apiURL;\n\n  constructor( private httpClient: HttpClient) { }\n\n  getCupones(): any {\n    return this.httpClient.get(this.apiURL + 'inscripciones/lista-cuponesDescuento/');\n  }\n\n  getCuponByCodigo(codigo: string): any {\n    return this.httpClient.get(this.apiURL + 'inscripciones/devolver-cuponDescuento/?codigoCupon=' + codigo);\n  }\n\n  postCupon(cupon: ICupon): any {\n    return this.httpClient.post(this.apiURL + 'inscripciones/crear-cuponDescuento/', cupon);\n  }\n\n  putCupon(cupon: ICupon): any {\n    return this.httpClient.put(this.apiURL + 'inscripciones/editar-cuponDescuento/?codigoCupon=' + cupon.codigo, cupon);\n  }\n\n  deleteCupon(cupon: ICupon): any {\n    return this.httpClient.delete(this.apiURL + 'inscripciones/eliminar-cuponDescuento/?codigoCupon=' + cupon.codigo);\n  }\n\n  verifyCupon(codigo: string): any {\n    return this.httpClient.get(this.apiURL + 'inscripciones/verificar-cuponDescuento/?cuponDescuento=' + codigo);\n  }\n\n  validateCode(codigo: string): any {\n    return this.httpClient.get(this.apiURL + 'inscripciones/verificar-codigoCupon/?cuponDescuento=' + codigo);\n  }\n\n}\n","import { Component, OnInit } from '@angular/core';\nimport { ITarifa } from 'src/app/core/models/ITarifa';\nimport { CuponService } from 'src/app/core/services/cupon.service';\nimport { TarifasService } from 'src/app/core/services/tarifas.service';\nimport { ToastrService } from 'ngx-toastr';\nimport { ICupon } from 'src/app/core/models/ICupon';\nimport { CustomToastComponent } from 'src/app/core/components/custom-toast/custom-toast.component';\n\n@Component({\n  selector: 'app-cupon',\n  templateUrl: './cupon.component.html',\n  styleUrls: ['./cupon.component.css']\n})\nexport class CuponComponent implements OnInit {\n\n  edit = false;\n  new = false;\n  message = {header: '', body: ''};\n  cupon: ICupon;\n  cuponList: ICupon[];\n  tarifaList = [];\n  selectedTarifa: ITarifa;\n  codeValidation = '';\n\n  constructor(private cuponService: CuponService,\n              private tarifaService: TarifasService,\n              private toastr: ToastrService) { }\n\n  ngOnInit(): void {\n    this.getCupones();\n  }\n\n  getCupones(): void {\n    this.cuponList = [];\n    this.cuponService.getCupones().subscribe((res: any) => {\n      this.cuponList = res.data;\n    });\n  }\n\n  postCupon(item): void {\n    this.cuponService.postCupon(item).subscribe((res: any) => {\n      this.getCupones();\n      this.toggleEdit();\n    });\n  }\n\n  putCupon(item): void {\n    this.cuponService.putCupon(item).subscribe((res: any) => {\n      this.getCupones();\n      this.toggleEdit();\n    });\n  }\n\n  deleteCupon(cupon): void {\n    this.toastr.show( '¿Seguro que deseas borrar el cupón ' + cupon.codigo + '?', 'Borrar Cupón', {\n        toastComponent: CustomToastComponent,\n        disableTimeOut: true,\n        tapToDismiss: false,\n        enableHtml: true\n      })\n      .onAction.subscribe(() => {\n        this.cuponService.deleteCupon(cupon).subscribe((res: any) => {\n          this.getCupones();\n        });\n      });\n  }\n\n  verificarCupon(codigo): void {\n    this.cuponService.verifyCupon(codigo).subscribe((res: any) => {\n    });\n  }\n\n  validarCodigoCupon(codigo): void {\n    this.cuponService.validateCode(codigo).subscribe(\n      res => {this.toastr.success('Código válido.');\n              this.codeValidation = res.status; },\n      err => {this.toastr.warning('El código ya existe.');\n              this.codeValidation = err.status; });\n  }\n\n  getTarifas(): void {\n    this.tarifaList = [];\n    this.tarifaService.getTarifas().subscribe((res: any) => {\n      this.tarifaList = res.data;\n    });\n  }\n\n  newCupon(): void {\n    this.cupon = {\n    codigo: '',\n    idTarifa: '',\n    nombreTarifa: '',\n    porcentajeDesc: 0,\n    usosRestantes: 0\n    };\n    this.getTarifas();\n    this.selectedTarifa = {\n      id: '0',\n      idCongreso: '0',\n      nombre: '',\n      precio: 0,\n      fechaDesde: '',\n      fechaHasta: ''\n    };\n    this.new = true;\n    this.toggleEdit();\n  }\n\n  editCupon(item: ICupon): void {\n    this.cupon = item;\n    this.getTarifas();\n    this.new = false;\n    this.toggleEdit();\n  }\n\n  toggleEdit(): void {\n    this.edit = !this.edit;\n  }\n}\n","export default \"<div class=\\\"container-fluid\\\">\\n    <div *ngIf=\\\"!edit\\\">\\n        <app-cupon-list [cuponList]=\\\"cuponList\\\"\\n        (crearCuponEvent)=\\\"newCupon($event)\\\" \\n        (editarCuponEvent)=\\\"editCupon($event)\\\" \\n        (eliminarCuponEvent)=\\\"deleteCupon($event)\\\">\\n        </app-cupon-list>\\n    </div>\\n    <div *ngIf=\\\"edit\\\">\\n        <app-cupon-form [new]=\\\"new\\\"\\n                        [cupon]=\\\"cupon\\\"\\n                        [tarifaList]=\\\"tarifaList\\\"\\n                        [selectedTarifa]=\\\"selectedTarifa\\\"\\n                        [codeValidation]=\\\"codeValidation\\\"\\n                        (newCuponEvent)=\\\"postCupon($event)\\\" \\n                        (editCuponEvent)=\\\"putCupon($event)\\\"\\n                        (validarCodigoCuponEvent)=\\\"validarCodigoCupon($event)\\\"\\n                        (cancelEvent)=\\\"toggleEdit($event)\\\">\\n        </app-cupon-form>\\n    </div>\\n</div>\\n\";","export default \"\";","import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport { CuponComponent } from './cupon.component';\n\nconst routes: Routes = [{\n  path: '',\n  component: CuponComponent\n}];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class CuponRoutingModule { }\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { CuponRoutingModule } from './cupon-routing.module';\nimport { CoreModule } from 'src/app/core/core.module';\nimport { CuponComponent } from './cupon.component';\n\n\n@NgModule({\n  declarations: [CuponComponent],\n  imports: [\n    CommonModule,\n    CuponRoutingModule,\n    CoreModule\n  ]\n})\nexport class CuponModule { }\n"],"sourceRoot":"webpack:///"}