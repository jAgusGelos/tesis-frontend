(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{uySA:function(t,e,i){"use strict";i.r(e),i.d(e,"CuponModule",function(){return b});var n=i("mrSG"),o=i("fXoL"),s=i("ofXK"),c=i("tyNb"),p=i("tk/3"),a=i("AytR");let r=class{constructor(t){this.httpClient=t,this.apiURL=a.a.apiURL}getCupones(){return this.httpClient.get(this.apiURL+"inscripciones/lista-cuponesDescuento/")}getCuponByCodigo(t){return this.httpClient.get(this.apiURL+"inscripciones/devolver-cuponDescuento/?codigoCupon="+t)}postCupon(t){return this.httpClient.post(this.apiURL+"inscripciones/crear-cuponDescuento/",t)}putCupon(t){return this.httpClient.put(this.apiURL+"inscripciones/editar-cuponDescuento/?codigoCupon="+t.codigo,t)}deleteCupon(t){return this.httpClient.delete(this.apiURL+"inscripciones/eliminar-cuponDescuento/?codigoCupon="+t.codigo)}verifyCupon(t){return this.httpClient.get(this.apiURL+"inscripciones/verificar-cuponDescuento/?cuponDescuento="+t)}validateCode(t){return this.httpClient.get(this.apiURL+"inscripciones/verificar-codigoCupon/?cuponDescuento="+t)}};r.ctorParameters=()=>[{type:p.b}],r=Object(n.c)([Object(o.F)({providedIn:"root"})],r);var u=i("WPk3"),d=i("5eHb"),h=i("KaZm");let l=class{constructor(t,e,i){this.cuponService=t,this.tarifaService=e,this.toastr=i,this.edit=!1,this.new=!1,this.message={header:"",body:""},this.tarifaList=[],this.codeValidation=""}ngOnInit(){this.getCupones()}getCupones(){this.cuponList=[],this.cuponService.getCupones().subscribe(t=>{this.cuponList=t.data})}postCupon(t){this.cuponService.postCupon(t).subscribe(t=>{this.getCupones(),this.toggleEdit()})}putCupon(t){this.cuponService.putCupon(t).subscribe(t=>{this.getCupones(),this.toggleEdit()})}deleteCupon(t){this.toastr.show("\xbfSeguro que deseas borrar el cup\xf3n "+t.codigo+"?","Borrar Cup\xf3n",{toastComponent:h.a,disableTimeOut:!0,tapToDismiss:!1,enableHtml:!0}).onAction.subscribe(()=>{this.cuponService.deleteCupon(t).subscribe(t=>{this.getCupones()})})}verificarCupon(t){this.cuponService.verifyCupon(t).subscribe(t=>{})}validarCodigoCupon(t){this.cuponService.validateCode(t).subscribe(t=>{this.toastr.success("C\xf3digo v\xe1lido."),this.codeValidation=t.status},t=>{this.toastr.warning("El c\xf3digo ya existe."),this.codeValidation=t.status})}getTarifas(){this.tarifaList=[],this.tarifaService.getTarifas().subscribe(t=>{this.tarifaList=t.data})}newCupon(){this.cupon={codigo:"",idTarifa:"",nombreTarifa:"",porcentajeDesc:0,usosRestantes:0},this.getTarifas(),this.selectedTarifa={id:"0",idCongreso:"0",nombre:"",precio:0,fechaDesde:"",fechaHasta:""},this.new=!0,this.toggleEdit()}editCupon(t){this.cupon=t,this.getTarifas(),this.new=!1,this.toggleEdit()}toggleEdit(){this.edit=!this.edit}};l.ctorParameters=()=>[{type:r},{type:u.a},{type:d.d}],l=Object(n.c)([Object(o.o)({selector:"app-cupon",template:'<div class="container-fluid">\n    <div *ngIf="!edit">\n        <app-cupon-list [cuponList]="cuponList"\n        (crearCuponEvent)="newCupon($event)" \n        (editarCuponEvent)="editCupon($event)" \n        (eliminarCuponEvent)="deleteCupon($event)">\n        </app-cupon-list>\n    </div>\n    <div *ngIf="edit">\n        <app-cupon-form [new]="new"\n                        [cupon]="cupon"\n                        [tarifaList]="tarifaList"\n                        [selectedTarifa]="selectedTarifa"\n                        [codeValidation]="codeValidation"\n                        (newCuponEvent)="postCupon($event)" \n                        (editCuponEvent)="putCupon($event)"\n                        (validarCodigoCuponEvent)="validarCodigoCupon($event)"\n                        (cancelEvent)="toggleEdit($event)">\n        </app-cupon-form>\n    </div>\n</div>\n',styles:[""]})],l);const C=[{path:"",component:l}];let g=class{};g=Object(n.c)([Object(o.N)({imports:[c.c.forChild(C)],exports:[c.c]})],g);var v=i("pKmL");let b=class{};b=Object(n.c)([Object(o.N)({declarations:[l],imports:[s.c,g,v.a]})],b)}}]);
//# sourceMappingURL=22.js.map