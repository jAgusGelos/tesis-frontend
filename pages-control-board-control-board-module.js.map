{"version":3,"sources":["./src/app/pages/control-board/control-board-routing.module.ts","./src/app/pages/control-board/control-board.module.ts","./src/app/pages/control-board/control-board.component.html","./src/app/pages/control-board/control-board.component.ts"],"names":[],"mappings":"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","file":"pages-control-board-control-board-module.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport { ControlBoardComponent } from './control-board.component';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: ControlBoardComponent\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class ControlBoardRoutingModule { }\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { ControlBoardRoutingModule } from './control-board-routing.module';\nimport { ControlBoardComponent } from './control-board.component';\nimport { CoreModule } from 'src/app/core/core.module';\nimport { NgbModule } from '@ng-bootstrap/ng-bootstrap';\n\n\n@NgModule({\n  declarations: [ControlBoardComponent],\n  imports: [\n    CommonModule,\n    ControlBoardRoutingModule,\n    CoreModule,\n    NgbModule\n  ]\n})\nexport class ControlBoardModule { }\n","<div class=\"container-fluid\">\n  <div class=\"contenidos\">\n    <hr>\n    <div class=\"row justify-content-center\">\n      <h3 class='text-center col-md-3'>Tablero de Control</h3>\n      <a\n      ngbPopover=\"En esta pantalla podrás observar todos los artículos con su correspondiente estado, además podrás eliminar y reasignar nuevos evaluadores\"\n      popoverClass=\"popover\"\n      placement=\"bottom\"\n      class=\"col-sm-1\"\n      popoverTitle=\"Inforormación de la pantalla:\">\n      <i class=\"fas fa-info-circle bigger\"></i>\n      </a>\n    </div>\n    <hr>\n  </div>\n  <br>\n  <div class=\"row justify-content-between\">\n    <app-search class=\"col-md-5\" [fullList]='assignedPaperList' [attribFilter]='nombreArticulo'\n      (listEvent)='search($event)'></app-search>\n      <div class=\"col-md-3\">\n        <h5><a\n              ngbPopover=\"Dias restantes: {{restFechaFinEv}} \"\n              popoverClass=\"popover\"\n              placement=\"top\"\n              popoverTitle=\"Tiempo restante de evaluación\">\n              <i class=\"fas fa-clock clock pt-3\"></i>\n              </a>&nbsp;Fin Evaluación: {{fechaFinEv}}</h5>\n      </div>\n      <div class=\"col-md-3\">\n        <h5><a\n              ngbPopover=\"Dias restantes: {{restFechaFinProroga}} \"\n              popoverClass=\"popover\"\n              placement=\"top\"\n              popoverTitle=\"Tiempo restante para el fin de prorroga de evaluaciones:\">\n              <i class=\"fas fa-clock clock pt-3\"></i>\n              </a>&nbsp;Fin Prorroga: {{fechaFinProrroga}}</h5>\n      </div>\n  </div>\n  <table class=\"table text-center table-hover table-bordered\">\n    <thead class='thead'>\n      <tr>\n        <th class=\"col-md-3\">Artículo</th>\n        <th class=\"col-md-2\">Evaluador 1</th>\n        <th class=\"col-md-2\">Evaluador 2</th>\n        <th class=\"col-md-2\">Evaluador 3</th>\n      </tr>\n    </thead>\n\n    <tbody>\n      <tr class='align-items-center' *ngFor='let item of showAssignedPaperList'>\n        <td>{{item.nombreArticulo}}</td>\n        <td *ngIf=\"item.idEval1\">\n          <div class=\"row px-2\">\n            <h6>{{item.nomEval[0].nombre}} {{item.nomEval[0].apellido}}</h6>\n          </div>\n          <div class=\"row px-2\">\n            <div class=\"col-md-6\">\n              Confirmado\n            </div>\n            <div class=\"col-md-3\">\n              <button type=\"reset\" class='redondo' disabled\n                [ngClass]=\"item.nomEval[0].is_active ? 'verde' : 'rojo' \"></button>\n            </div>\n          </div>\n          <div class=\"row px-2 pt-1\">\n            <div class=\"col-md-6\">\n              Evaluado\n            </div>\n            <div class=\"col-md-3\">\n              <button type=\"reset\" class='redondo' disabled\n                [ngClass]='item.nomEval[0].idEstadoEvaluacion === 3 ? \"verde\" : \"rojo\"'></button>\n            </div>\n          </div>\n          <div class=\"row px-2 pt-3\" *ngIf=\"!(item.nomEval[0].idEstadoEvaluacion >= 2)\">\n            <a (click)='eliminarYAsignar(item, item.nomEval[0])' class=\"btn btn-secondary \">Eliminar y Reasignar</a>\n          </div>\n        </td>\n        <td *ngIf=\"!item.idEval1\">\n          <div class=\"col-sm-12\">\n            <select name=\"eval\" class=\"form-control\" (change)=\"selectOption1($event.target.value, item)\">\n              <option hidden [selected]='item.idEval1===null'>Evaluador 1</option>\n              <option *ngFor=\"let eval of evaluatorList\" value='{{eval.idEvaluador}}'\n                [selected]='item.idEval1 === eval.idEvaluador'>{{ eval.nombreEv }} {{eval.apellidoEv}}</option>\n            </select>\n          </div>\n        </td>\n        <td *ngIf=\"item.idEval2\">\n          <div class=\"row px-2\">\n            <h6>{{item.nomEval[1].nombre}} {{item.nomEval[1].apellido}}</h6>\n          </div>\n          <div class=\"row px-2\">\n            <div class=\"col-md-6\">\n              Confirmado\n            </div>\n            <div class=\"col-md-3\">\n              <button type=\"reset\" class='redondo' disabled\n                [ngClass]=\"item.nomEval[1].is_active ? 'verde' : 'rojo' \"></button>\n            </div>\n          </div>\n          <div class=\"row px-2 pt-1\">\n            <div class=\"col-md-6\">\n              Evaluado\n            </div>\n            <div class=\"col-md-3\">\n              <button type=\"reset\" class='redondo' disabled\n                [ngClass]='item.nomEval[1].idEstadoEvaluacion === 3 ? \"verde\" : \"rojo\"'></button>\n            </div>\n          </div>\n          <div class=\"row px-2 pt-3\" *ngIf=\"!(item.nomEval[1].idEstadoEvaluacion >= 2)\">\n            <a (click)='eliminarYAsignar(item, item.nomEval[1])' class=\"btn btn-secondary \">Eliminar y Reasignar</a>\n          </div>\n        </td>\n        <td *ngIf=\"!item.idEval2\">\n          <div class=\"col-sm-12\">\n            <select name=\"eval\" class=\"form-control\" (change)=\"selectOption2($event.target.value, item)\">\n              <option hidden [selected]='item.idEval2===null'>Evaluador 2</option>\n              <option *ngFor=\"let eval of evaluatorList\" value='{{eval.idEvaluador}}'\n                [selected]='item.idEval2===eval.idEvaluador'>{{ eval.nombreEv }} {{eval.apellidoEv}}</option>\n            </select>\n          </div>\n        </td>\n        <td *ngIf=\"item.idEval3\">\n          <div class=\"row px-2\">\n            <h6>{{item.nomEval[2].nombre}} {{item.nomEval[2].apellido}}</h6>\n          </div>\n          <div class=\"row px-2\">\n            <div class=\"col-md-6\">\n              Confirmado\n            </div>\n            <div class=\"col-md-3\">\n              <button type=\"reset\" class='redondo' disabled\n                [ngClass]=\"item.nomEval[2].is_active ? 'verde' : 'rojo' \"></button>\n            </div>\n          </div>\n          <div class=\"row px-2 pt-1\">\n            <div class=\"col-md-6\">\n              Evaluado\n            </div>\n            <div class=\"col-md-3\">\n              <button type=\"reset\" class='redondo' disabled\n                [ngClass]='item.nomEval[2].idEstadoEvaluacion === 3 ? \"verde\" : \"rojo\"'></button>\n            </div>\n          </div>\n          <div class=\"row px-2 pt-3\" *ngIf=\"!(item.nomEval[2].idEstadoEvaluacion >= 2)\">\n            <a (click)='eliminarYAsignar(item, item.nomEval[2])' class=\"btn btn-secondary \">Eliminar y Reasignar</a>\n          </div>\n        </td>\n        <td *ngIf=\"!item.idEval3\">\n          <div class=\"col-sm-12\">\n            <select name=\"eval\" class=\"form-control\" (change)=\"selectOption3($event.target.value, item)\">\n              <option hidden [selected]='item.idEval3===null'>Evaluador 3</option>\n              <option *ngFor=\"let eval of evaluatorList\" [value]='eval.idEvaluador'\n                [selected]='item.idEval3===eval.idEvaluador'>{{ eval.nombreEv }} {{eval.apellidoEv}}</option>\n            </select>\n          </div>\n        </td>\n      </tr>\n\n    </tbody>\n  </table>\n</div>\n","import { Component, OnInit } from '@angular/core';\nimport { ArticulosService } from 'src/app/core/services/articulos.service';\nimport { CongressService } from 'src/app/core/services/congress.service';\nimport { EvaluatorService } from 'src/app/core/services/evaluator.service';\n\n@Component({\n  selector: 'app-control-board',\n  templateUrl: './control-board.component.html',\n  styleUrls: ['./control-board.component.css']\n})\nexport class ControlBoardComponent implements OnInit {\n\n  // Revisar Eliminación y reasignación de evaluador. No está funcionando\n\n  paperList: any[];\n  evaluatorList = [];\n  idEval = 0;\n  assignedPaperList = [];\n  showAssignedPaperList = [];\n  nombreArticulo = 'nombreArticulo';\n  fechaFinEv: '';\n  fechaFinProrroga: '';\n  restFechaFinEv = 0;\n  restFechaFinProroga = 0;\n\n\n  constructor(private evaluatorService: EvaluatorService,\n              private articulosService: ArticulosService,\n              private congressService: CongressService\n\n  ) { }\n\n  ngOnInit(): void {\n    this.getPaperList();\n    this.getEvaluators();\n    this.getCongress();\n  }\n\n  getCongress(): void {\n    this.congressService.getCongressById().subscribe((res: any) => {\n      this.fechaFinEv = res.data[0].fechaFinEvaluacion.split(' ')[0];\n      this.fechaFinProrroga = res.data[0].fechaFinReEv.split(' ')[0];\n\n      const oneDay = 24 * 60 * 60 * 1000;\n      const today = new Date();\n      const fechaF = res.data[0].fechaFinEvaluacion.split(' ')[0].split('/');\n      const fechaP = res.data[0].fechaFinReEv.split(' ')[0].split('/');\n\n      const fechaFin = new Date(fechaF[2], fechaF[1] - 1, fechaF[0]);\n      const fechaPR = new Date(fechaP[2], fechaP[1] - 1, fechaP[0]);\n\n      this.restFechaFinEv = Math.round(Math.abs((fechaFin.valueOf() - today.valueOf()) / oneDay));\n      this.restFechaFinProroga = Math.round(Math.abs((fechaPR.valueOf() - today.valueOf()) / oneDay));\n    });\n  }\n\n  getPaperList(): void {\n    // devuelve la lista de papers asignados.  getArticulosEvaluadoresCompleto\n    this.articulosService.getPaperEvaluators().subscribe((res: any) => {\n      this.paperList = res.data.filter((x: any) => (x.estadoArticuloNombre === 'Sin Evaluar' || x.estadoArticuloNombre === 'Enviado'));\n      this.assignedPaperList = this.paperList.map((x: any) => {\n        return {\n          idEval1: x.evaluadores[0].id,\n          idEval2: x.evaluadores[1].id,\n          idEval3: x.evaluadores[2].id,\n          idArticulo: x.idArticulo,\n          nombreArticulo: x.nombreArticulo,\n          nomEval: x.evaluadores\n        };\n      });\n      this.showAssignedPaperList = this.assignedPaperList.slice();\n    });\n  }\n\n  getEvaluators(): void {\n    this.evaluatorService.getEvaluatorsGroup().subscribe((res: any) => {\n      this.evaluatorList = res.data;\n    });\n  }\n\n  selectOption1(value: any, item: any): void {\n    this.assignedPaperList = this.assignedPaperList.map((x: any) => {\n      if (item.idArticulo === x.idArticulo) {\n        if (x.idEval2 !== +value && x.idEval3 !== +value) {\n          x.idEval1 = +value;\n        } else {\n          alert('Evaluador ya asignado en este mismo paper');\n          item.idEval1 = null;\n        }\n      }\n      return x;\n    });\n\n    // Falta hacer el post con el nuevo evaluador\n  }\n\n  selectOption2(value: any, item: any): void {\n    this.assignedPaperList = this.assignedPaperList.map((x: any) => {\n      if (item.idArticulo === x.idArticulo) {\n        if (x.idEval1 !== +value && x.idEval3 !== +value) {\n          x.idEval2 = +value;\n        } else {\n          alert('Evaluador ya asignado en este mismo paper');\n          item.idEval2 = null;\n        }\n      }\n      return x;\n    });\n  }\n\n  selectOption3(value: any, item: any): void {\n    this.assignedPaperList = this.assignedPaperList.map((x: any) => {\n      if (item.idArticulo === x.idArticulo) {\n        if (x.idEval2 !== +value && x.idEval1 !== +value) {\n          x.idEval3 = +value;\n        } else {\n          alert('Evaluador ya asignado en este mismo paper');\n          item.idEval3 = null;\n        }\n      }\n      return x;\n    });\n  }\n\n  search(filterList): void {\n    this.showAssignedPaperList = filterList;\n  }\n\n  eliminarYAsignar(art: any, ev: any): void {\n    // Llamar al service para hacer la desvinculación\n    this.assignedPaperList = this.assignedPaperList.map((item: any) => {\n      if (item.idArticulo === art.idArticulo) {\n        if (item.idEval1 === ev.id) {\n          item.idEval1 = null;\n        } else if (item.idEval2 === ev.id) {\n          item.idEval2 = null;\n        } else {\n          item.idEval3 = null;\n        }\n      }\n      return item;\n    });\n    this.showAssignedPaperList = this.assignedPaperList.slice();\n  }\n\n}\n"],"sourceRoot":"webpack:///"}