(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{ZNzd:function(t,e,n){"use strict";n.r(e),n.d(e,"EvaluateArticleModule",function(){return I});var a=n("ofXK"),i=n("tyNb"),o=n("fXoL"),c=n("AytR"),r=n("tk/3");let s=(()=>{class t{constructor(t){this.httpClient=t,this.apiURL=c.a.apiURL}enviarEvaluacion(t){return this.httpClient.put(this.apiURL+"articulos/enviar-evaluacion/",t)}getPaperEval(){return this.httpClient.get(this.apiURL+"articulos/consulta-evaluaciones/")}editarEvaluacion(t){return this.httpClient.put(this.apiURL+"articulos/editar-evaluacion/?idArticulo="+t.idArticulo,t.evaluacion)}getEvaluaciones(t){return this.httpClient.get(this.apiURL+"articulos/consultaDetalleEvaluacion/?idArticulo="+t)}getTest(t){return this.httpClient.get(this.apiURL+"articulos/consulta-evaluacion/?idArticulo="+t)}}return t.\u0275fac=function(e){return new(e||t)(o.Yb(r.b))},t.\u0275prov=o.Ib({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var l=n("y6im"),b=n("5eHb"),u=n("TJ9D"),p=n("bcAm"),v=n("1kSV");function d(t,e){if(1&t){const t=o.Sb();o.Rb(0,"td"),o.Rb(1,"a",12),o.bc("click",function(){o.Bc(t);const e=o.dc().$implicit;return o.dc().toggleEvaluate(e)}),o.Nb(2,"i",13),o.Qb(),o.Jc(3," \xa0\xa0 "),o.Rb(4,"a",14),o.Nb(5,"i",15),o.Qb(),o.Rb(6,"ul",16),o.Rb(7,"li"),o.Rb(8,"a",17),o.bc("click",function(){o.Bc(t);const e=o.dc().$implicit;return o.dc().toggleCancel(e)}),o.Jc(9,"Rechazar Evaluaci\xf3n"),o.Qb(),o.Qb(),o.Qb(),o.Qb()}}function m(t,e){1&t&&(o.Rb(0,"td"),o.Rb(1,"a",18),o.Nb(2,"i",19),o.Qb(),o.Qb())}function h(t,e){if(1&t&&(o.Rb(0,"tr",10),o.Rb(1,"td"),o.Jc(2),o.Qb(),o.Rb(3,"td"),o.Jc(4),o.Qb(),o.Rb(5,"td"),o.Jc(6),o.Qb(),o.Hc(7,d,10,0,"td",11),o.Hc(8,m,3,0,"td",11),o.Qb()),2&t){const t=e.$implicit,n=e.index;o.Ab(2),o.Kc(n+1),o.Ab(2),o.Kc(t.nombreArticulo),o.Ab(2),o.Kc(t.nombreEstado),o.Ab(1),o.lc("ngIf",t.estado<3),o.Ab(1),o.lc("ngIf",t.estado>=3)}}let g=(()=>{class t{constructor(){this.paperList=[],this.EvaluationEvent=new o.n,this.EvaluationAcceptEvent=new o.n,this.EvaluationCancelEvent=new o.n,this.showList=[]}ngOnInit(){window.scrollTo(0,0),this.showList=this.paperList.slice()}toggleEvaluate(t){this.EvaluationEvent.emit(t)}toggleAccept(t){this.EvaluationAcceptEvent.emit(t)}toggleCancel(t){this.EvaluationCancelEvent.emit(t)}search(t){this.showList=t}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Gb({type:t,selectors:[["app-evaluate-paper-list"]],inputs:{paperList:"paperList"},outputs:{EvaluationEvent:"EvaluationEvent",EvaluationAcceptEvent:"EvaluationAcceptEvent",EvaluationCancelEvent:"EvaluationCancelEvent"},decls:23,vars:3,consts:[[1,"container-fluid"],[1,"contenidos"],[1,"text-center"],[1,"row"],[1,"col-md-5",3,"fullList","attribFilter","listEvent"],[1,"table","text-center","table-hover","table-bordered"],[1,"thead"],[1,"col-md-2"],[1,"col-md-4"],["class","align-items-center",4,"ngFor","ngForOf"],[1,"align-items-center"],[4,"ngIf"],["title","Evaluar",3,"click"],[1,"fas","fa-pencil-alt","fa-lg"],["data-bs-toggle","dropdown","title","M\xe1s Opciones"],[1,"fas","fa-ellipsis-h"],[1,"dropdown-menu"],["routerLink","/",1,"dropdown-item",3,"click"],["ngbPopover","Las acciones solo est\xe1n disponibles para los art\xedculos no evaluados","popoverClass","popover","placement","left","popoverTitle","Informaci\xf3n:"],[1,"fas","fa-info-circle","bigger"]],template:function(t,e){1&t&&(o.Rb(0,"div",0),o.Rb(1,"div",1),o.Nb(2,"hr"),o.Rb(3,"h3",2),o.Jc(4,"Plantilla de Evaluaci\xf3n"),o.Qb(),o.Nb(5,"hr"),o.Qb(),o.Nb(6,"br"),o.Rb(7,"div",3),o.Rb(8,"app-search",4),o.bc("listEvent",function(t){return e.search(t)}),o.Qb(),o.Qb(),o.Rb(9,"table",5),o.Rb(10,"thead",6),o.Rb(11,"tr"),o.Rb(12,"th",7),o.Jc(13,"Id"),o.Qb(),o.Rb(14,"th",8),o.Jc(15,"Nombre"),o.Qb(),o.Rb(16,"th",8),o.Jc(17,"Estado"),o.Qb(),o.Rb(18,"th",7),o.Jc(19,"Acciones"),o.Qb(),o.Qb(),o.Qb(),o.Rb(20,"tbody"),o.Hc(21,h,9,5,"tr",9),o.Qb(),o.Qb(),o.Nb(22,"br"),o.Qb()),2&t&&(o.Ab(8),o.lc("fullList",e.paperList)("attribFilter","nombreArticulo"),o.Ab(13),o.lc("ngForOf",e.showList))},directives:[p.a,a.n,a.o,i.c,v.b],styles:[".container-fluid[_ngcontent-%COMP%]{background-color:#f4f4f4}.contenidos[_ngcontent-%COMP%]{padding-bottom:3rem}.thead[_ngcontent-%COMP%]{background-color:#c8e5f1}.greyned[_ngcontent-%COMP%]{color:grey}.btn-primary[_ngcontent-%COMP%]{background-color:#3cafe0;border:none}i[_ngcontent-%COMP%]{cursor:pointer}.fas[_ngcontent-%COMP%]{color:#3cafe0}.fas[_ngcontent-%COMP%]:hover{color:#3994bb;cursor:pointer}hr[_ngcontent-%COMP%]{border:1px solid #00609c}@media (min-width:768px){hr[_ngcontent-%COMP%]{margin-left:25%;margin-right:25%}.container-fluid[_ngcontent-%COMP%]{padding:5rem}}[_nghost-%COMP%] .popover .popover-header{background-color:#3cafe0}.bigger[_ngcontent-%COMP%]{font-size:170%;margin-bottom:1rem}"]}),t})();var f=n("KaZm"),E=n("3Pt+");function R(t,e){if(1&t&&(o.Rb(0,"option",30),o.Jc(1),o.Qb()),2&t){const t=e.$implicit,n=o.dc().$implicit;o.mc("value",t.value),o.lc("selected",n.puntuacion===t.value),o.Ab(1),o.Kc(t.nombre)}}function Q(t,e){if(1&t){const t=o.Sb();o.Rb(0,"tr",27),o.Rb(1,"td",28),o.Jc(2),o.Qb(),o.Rb(3,"td"),o.Jc(4),o.Qb(),o.Rb(5,"td",28),o.Rb(6,"select",29),o.bc("change",function(n){o.Bc(t);const a=e.index;return o.dc().setPuntuacion(n.target.value,a)}),o.Nb(7,"option",16),o.Hc(8,R,2,3,"option",17),o.Qb(),o.Qb(),o.Qb()}if(2&t){const t=e.$implicit,n=o.dc();o.Ab(2),o.Kc(t.nombre),o.Ab(2),o.Kc(t.descripcion),o.Ab(3),o.lc("selected",null===t.puntuacion),o.Ab(1),o.lc("ngForOf",n.puntuaciones)}}function C(t,e){if(1&t&&(o.Rb(0,"option",30),o.Jc(1),o.Qb()),2&t){const t=e.$implicit,n=o.dc();o.mc("value",t.value),o.lc("selected",n.paper.recomendacion===t.value),o.Ab(1),o.Kc(t.nombre)}}let w=(()=>{class t{constructor(t){this.toastr=t,this.items=[],this.GetItemsEvent=new o.n,this.GetFileEvent=new o.n,this.SaveEvent=new o.n,this.CancelEvent=new o.n,this.puntuaciones=[{value:1,nombre:"Muy D\xe9bil"},{value:2,nombre:"D\xe9bil"},{value:3,nombre:"Aceptable"},{value:4,nombre:"Bueno"},{value:5,nombre:"Muy bueno"}],this.recomendaciones=[{value:1,nombre:"Rechazar Fuertemente"},{value:2,nombre:"Rechazar"},{value:3,nombre:"Rechazar D\xe9bilmente"},{value:4,nombre:"Necesita Reentrega"},{value:5,nombre:"Aprobar D\xe9bilmente"},{value:6,nombre:"Aprobar"},{value:7,nombre:"Aprobar Fuertemente"}]}ngOnInit(){this.evaluacion={itemsEvaluacion:this.items,idRecomendacion:this.paper.recomendacion,observacion:this.paper.observaciones,observacionInterna:this.paper.observacionInterna},window.scrollTo(0,0),this.getItems(this.paper.idArticulo)}save(t){this.handleItems();const e={idArticulo:this.paper.idArticulo,evaluacion:this.evaluacion,submit:t};return this.SaveEvent.emit(e),e}submit(){for(const t of this.items)if(null==t.puntuacion)return void this.toastr.warning("Todos los aspectos requieren evaluaci\xf3n!");null!=this.evaluacion.idRecomendacion?""!==this.evaluacion.observacion?this.toastr.show("Si env\xeda la evaluaci\xf3n, despu\xe9s no podr\xe1 editarla. Seguro desea continuar?","Enviar Evaluaci\xf3n",{toastComponent:f.a,disableTimeOut:!0,tapToDismiss:!1,enableHtml:!0}).onAction.subscribe(()=>{this.save(!0)}):this.toastr.warning("Se requiere escribir una observaci\xf3n para el autor."):this.toastr.warning("Se requiere seleccionar una recomendaci\xf3n final!")}handleItems(){let t="";for(let e=0;e<this.items.length;e++)t=t+this.items[e].id+"-"+this.items[e].puntuacion+",",e===this.items.length-1&&(t=t+this.items[e].id+"-"+this.items[e].puntuacion);this.evaluacion.itemsEvaluacion=t}setObservacionAutor(){const t=document.getElementById("observacion-autor");this.evaluacion.observacion=t.value}setObservacionInterna(){const t=document.getElementById("observacion-interna");this.evaluacion.observacionInterna=t.value}setPuntuacion(t,e){this.items[e].puntuacion=""!==t?parseInt(t,10):null}setRecomendacion(t){this.evaluacion.idRecomendacion=""!==t?parseInt(t,10):null}toast(){this.toastr.show("Esta seguro que desea borrar","Confirmar borrado?",{toastComponent:f.a,disableTimeOut:!0,tapToDismiss:!1,enableHtml:!0}).onAction.subscribe(()=>{console.log("Camino feliz")})}getItems(t){this.GetItemsEvent.emit(t)}getFile(t){this.GetFileEvent.emit(t)}cancel(){this.CancelEvent.emit()}}return t.\u0275fac=function(e){return new(e||t)(o.Mb(b.d))},t.\u0275cmp=o.Gb({type:t,selectors:[["app-evaluate-paper-form"]],inputs:{paper:"paper",items:"items",evaluation:"evaluation"},outputs:{GetItemsEvent:"GetItemsEvent",GetFileEvent:"GetFileEvent",SaveEvent:"SaveEvent",CancelEvent:"CancelEvent"},decls:54,vars:6,consts:[[1,"card"],[1,"card-body"],[1,"card-title","text-center"],[1,"row","justify-content-md-center"],["role","button",1,"btn","btn-primary","col-md-3",3,"click"],[1,"container"],[1,"table","table-hover","table-bordered"],[1,"thead","text-center"],[1,"col-md-2"],[1,"col-md-4"],["class","align-items-center",4,"ngFor","ngForOf"],[1,"row","g-3","align-items-center","justify-content-md-center"],[1,"col","col-md-2"],["for","recomendaciones",1,"col-form-label"],[1,"col","col-md-4"],["name","recomendaciones",1,"form-select",3,"change"],["disabled","",3,"selected"],[3,"value","selected",4,"ngFor","ngForOf"],[1,"row","g-3","justify-content-md-center"],["for","observacion-autor",1,"col-form-label"],["id","observacion-autor",1,"form-control",3,"keyup"],["for","observacion-interna",1,"col-form-label"],["id","observacion-interna",1,"form-control",3,"keyup"],[1,"row","pt-3","btn-row","justify-content-md-center"],["role","button",1,"col-md-3","btn","btn-secondary",3,"click"],["role","button",1,"col-md-3","btn","btn-primary",3,"click"],["role","button",1,"col-md-6","btn","btn-success",3,"click"],[1,"align-items-center"],[1,"text-center"],["name","eval",1,"form-select",3,"change"],[3,"value","selected"]],template:function(t,e){1&t&&(o.Rb(0,"div",0),o.Rb(1,"div",1),o.Nb(2,"hr"),o.Rb(3,"h3",2),o.Jc(4,"Evaluando: "),o.Rb(5,"b"),o.Jc(6),o.Qb(),o.Qb(),o.Nb(7,"hr"),o.Rb(8,"div",3),o.Rb(9,"a",4),o.bc("click",function(){return e.getFile(e.paper.idArticulo)}),o.Jc(10,"Ver art\xedculo"),o.Qb(),o.Qb(),o.Rb(11,"div",5),o.Rb(12,"table",6),o.Rb(13,"thead",7),o.Rb(14,"tr"),o.Rb(15,"th",8),o.Jc(16,"Aspecto"),o.Qb(),o.Rb(17,"th",9),o.Jc(18,"Descripci\xf3n"),o.Qb(),o.Rb(19,"th",8),o.Jc(20,"Evaluaci\xf3n"),o.Qb(),o.Qb(),o.Qb(),o.Rb(21,"tbody"),o.Hc(22,Q,9,4,"tr",10),o.Qb(),o.Qb(),o.Qb(),o.Rb(23,"div",11),o.Rb(24,"div",12),o.Rb(25,"label",13),o.Jc(26,"Recomendaci\xf3n final"),o.Qb(),o.Qb(),o.Rb(27,"div",14),o.Rb(28,"select",15),o.bc("change",function(t){return e.setRecomendacion(t.target.value)}),o.Nb(29,"option",16),o.Hc(30,C,2,3,"option",17),o.Qb(),o.Qb(),o.Qb(),o.Rb(31,"div",18),o.Rb(32,"div",12),o.Rb(33,"label",19),o.Jc(34,"Observaci\xf3n para el Autor"),o.Qb(),o.Qb(),o.Rb(35,"div",14),o.Rb(36,"textarea",20),o.bc("keyup",function(){return e.setObservacionAutor()}),o.Jc(37),o.Qb(),o.Qb(),o.Qb(),o.Rb(38,"div",18),o.Rb(39,"div",12),o.Rb(40,"label",21),o.Jc(41,"Observaci\xf3n Interna"),o.Qb(),o.Qb(),o.Rb(42,"div",14),o.Rb(43,"textarea",22),o.bc("keyup",function(){return e.setObservacionInterna()}),o.Jc(44),o.Qb(),o.Qb(),o.Qb(),o.Rb(45,"div",23),o.Rb(46,"a",24),o.bc("click",function(){return e.cancel()}),o.Jc(47,"Cancelar"),o.Qb(),o.Jc(48," \xa0 "),o.Rb(49,"a",25),o.bc("click",function(){return e.save(!1)}),o.Jc(50,"Guardar Cambios"),o.Qb(),o.Qb(),o.Rb(51,"div",23),o.Rb(52,"a",26),o.bc("click",function(){return e.submit()}),o.Jc(53,"Enviar Evaluaci\xf3n"),o.Qb(),o.Qb(),o.Qb(),o.Qb()),2&t&&(o.Ab(6),o.Kc(e.paper.nombreArticulo),o.Ab(16),o.lc("ngForOf",e.items),o.Ab(7),o.lc("selected",null===e.paper.recomendacion),o.Ab(1),o.lc("ngForOf",e.recomendaciones),o.Ab(7),o.Kc(e.paper.observaciones),o.Ab(7),o.Kc(e.paper.observacionInterna))},directives:[a.n,E.k,E.q],styles:[".card[_ngcontent-%COMP%]{margin-left:auto;margin-right:auto}.row[_ngcontent-%COMP%]{margin-top:20px;margin-bottom:20px}.btn-row[_ngcontent-%COMP%]{margin-top:5px;margin-bottom:5px}.login-form[_ngcontent-%COMP%]{width:75%}.thead[_ngcontent-%COMP%]{background-color:#c8e5f1}.btn[_ngcontent-%COMP%]{border:none}.btn-primary[_ngcontent-%COMP%]{background-color:#3cafe0}.btn-primary[_ngcontent-%COMP%]:hover{background-color:#3994bb}.card[_ngcontent-%COMP%]{border-radius:3rem;padding-bottom:2rem;margin:1rem auto;background-color:#f4f4f4}.login-form[_ngcontent-%COMP%]{width:100%}.form-group[_ngcontent-%COMP%]{padding-top:.75rem;padding-bottom:.75rem}a[_ngcontent-%COMP%]{cursor:pointer}.card-title[_ngcontent-%COMP%]{width:100%;margin-left:auto;margin-right:auto;font-weight:300;padding-top:.5rem;padding-bottom:.5rem;max-width:-webkit-fit-content;max-width:-moz-fit-content;max-width:fit-content}hr[_ngcontent-%COMP%]{border:1px solid #00609c}input[_ngcontent-%COMP%]{border:none;border-bottom:1px solid #8d999e}@media (min-width:768px){.card[_ngcontent-%COMP%]{max-width:80%}.card-body[_ngcontent-%COMP%]{padding:auto}hr[_ngcontent-%COMP%]{margin-left:5%;margin-right:5%}}"]}),t})();function A(t,e){if(1&t){const t=o.Sb();o.Rb(0,"app-evaluate-paper-list",3),o.bc("EvaluationEvent",function(e){return o.Bc(t),o.dc().evaluate(e)})("EvaluationAcceptEvent",function(e){return o.Bc(t),o.dc().evaluate(e)})("EvaluationCancelEvent",function(e){return o.Bc(t),o.dc().evaluate(e)}),o.Qb()}if(2&t){const t=o.dc();o.lc("paperList",t.paperList)}}function O(t,e){if(1&t){const t=o.Sb();o.Rb(0,"app-evaluate-paper-form",4),o.bc("GetItemsEvent",function(e){return o.Bc(t),o.dc().getItems(e)})("GetFileEvent",function(e){return o.Bc(t),o.dc().getFile(e)})("SaveEvent",function(e){return o.Bc(t),o.dc().saveEvaluation(e)})("CancelEvent",function(e){return o.Bc(t),o.dc().toggleFlagEvaluate(e)}),o.Qb()}if(2&t){const t=o.dc();o.lc("paper",t.paper)("items",t.items)}}const P=[{path:"",component:(()=>{class t{constructor(t,e,n,a,i){this.paperEvalService=t,this.evaluationService=e,this.toastr=n,this.paperService=a,this.router=i,this.paperList=[],this.paper=[],this.items=[],this.flagEvaluate=!1,this.ok=!1}ngOnInit(){this.getPapers()}getPapers(){this.paperEvalService.getPaperEval().subscribe(t=>{this.paperList=t.data,this.ok=!0})}getItems(t){this.paperEvalService.getTest(t).subscribe(t=>{this.items=t.data})}evaluate(t){this.paper=t,this.flagEvaluate=!this.flagEvaluate}getFile(t){this.paperService.getPaperFile(t).subscribe(t=>{const e=new Blob([t],{type:"application/pdf"}),n=window.URL.createObjectURL(e),a=document.createElement("a");void 0!==a.download&&(a.setAttribute("href",n),a.setAttribute("target","_blank"),a.style.visibility="hidden",document.body.appendChild(a),a.click(),document.body.removeChild(a))})}toggleFlagEvaluate(){this.flagEvaluate=!this.flagEvaluate}saveEvaluation(t){this.paperEvalService.editarEvaluacion(t).subscribe(e=>{t.submit?this.submitEvaluation(t):(this.getPapers(),this.toastr.success("La evaluaci\xf3n ha sido guardada!"),setTimeout(()=>{window.location.reload()},200))})}submitEvaluation(t){this.paperEvalService.enviarEvaluacion(t).subscribe(t=>{this.toastr.success("La evaluaci\xf3n ha sido enviada!"),this.toggleFlagEvaluate(),this.getPapers(),setTimeout(()=>{window.location.reload()},200)})}acceptEvaluate(t){this.paper=t,this.evaluationService.acceptEvaluationPaper(this.paper).subscribe(t=>{this.toastr.success("La evaluaci\xf3n ha sido aceptada.")})}cancelEvaluate(t){this.paper=t,this.evaluationService.cancelarEvaluationPaper(this.paper).subscribe(t=>{this.toastr.success("La evaluaci\xf3n ha sido rechazada.")})}}return t.\u0275fac=function(e){return new(e||t)(o.Mb(s),o.Mb(l.a),o.Mb(b.d),o.Mb(u.a),o.Mb(i.b))},t.\u0275cmp=o.Gb({type:t,selectors:[["app-evaluate-article"]],decls:3,vars:2,consts:[[1,"container-fluid"],[3,"paperList","EvaluationEvent","EvaluationAcceptEvent","EvaluationCancelEvent",4,"ngIf"],[3,"paper","items","GetItemsEvent","GetFileEvent","SaveEvent","CancelEvent",4,"ngIf"],[3,"paperList","EvaluationEvent","EvaluationAcceptEvent","EvaluationCancelEvent"],[3,"paper","items","GetItemsEvent","GetFileEvent","SaveEvent","CancelEvent"]],template:function(t,e){1&t&&(o.Rb(0,"div",0),o.Hc(1,A,1,1,"app-evaluate-paper-list",1),o.Hc(2,O,1,2,"app-evaluate-paper-form",2),o.Qb()),2&t&&(o.Ab(1),o.lc("ngIf",!e.flagEvaluate&&e.ok),o.Ab(1),o.lc("ngIf",e.flagEvaluate))},directives:[a.o,g,w],styles:[""]}),t})()}];let y=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.Kb({type:t}),t.\u0275inj=o.Jb({imports:[[i.d.forChild(P)],i.d]}),t})();var M=n("pKmL");let I=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.Kb({type:t}),t.\u0275inj=o.Jb({imports:[[a.c,y,M.a]]}),t})()}}]);