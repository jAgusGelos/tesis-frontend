(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{"7hs+":function(t,e,o){"use strict";o.r(e),o.d(e,"EvaluatePapersChairSecModule",function(){return k});var i=o("ofXK"),c=o("tyNb"),a=o("fXoL"),n=o("TJ9D"),r=o("5zbU");function l(t,e){if(1&t&&(a.Rb(0,"div",53),a.Rb(1,"div",54),a.Rb(2,"p",55),a.Jc(3),a.Qb(),a.Qb(),a.Rb(4,"div",54),a.Rb(5,"p",56),a.Jc(6),a.Qb(),a.Qb(),a.Qb()),2&t){const t=e.$implicit;a.Ab(3),a.Lc("\xa0\xa0\xa0\xa0",t.evaluador,":"),a.Ab(3),a.Kc(t.recomendacion)}}function d(t,e){if(1&t){const t=a.Sb();a.Rb(0,"a",57),a.bc("click",function(){a.Bc(t);const e=a.dc().index;return a.dc().toggleEdit(e)}),a.Nb(1,"i",58),a.Jc(2," Evaluar"),a.Qb()}}function s(t,e){if(1&t){const t=a.Sb();a.Rb(0,"a",65),a.bc("click",function(){a.Bc(t);const e=a.dc(2).index;return a.dc().evaluar(e,1)}),a.Jc(1,"Aprobar"),a.Qb()}}function b(t,e){if(1&t){const t=a.Sb();a.Rb(0,"a",66),a.bc("click",function(){a.Bc(t);const e=a.dc(2).index;return a.dc().evaluar(e,2)}),a.Jc(1,"Rechazar"),a.Qb()}}function u(t,e){if(1&t){const t=a.Sb();a.Rb(0,"a",67),a.bc("click",function(){a.Bc(t);const e=a.dc(2).index;return a.dc().evaluar(e,3)}),a.Jc(1,"Reentrega"),a.Qb()}}function v(t,e){if(1&t){const t=a.Sb();a.Rb(0,"div",59),a.Hc(1,s,2,0,"a",60),a.Jc(2," \xa0 "),a.Hc(3,b,2,0,"a",61),a.Jc(4," \xa0 "),a.Hc(5,u,2,0,"a",62),a.Jc(6," \xa0 "),a.Rb(7,"a",63),a.bc("click",function(){a.Bc(t);const e=a.dc().index;return a.dc().toggleEdit(e)}),a.Nb(8,"i",64),a.Qb(),a.Qb()}if(2&t){const t=a.dc().$implicit;a.Ab(1),a.lc("ngIf",6!==t.idEstado&&8!==t.idEstado),a.Ab(2),a.lc("ngIf",7!==t.idEstado&&9!==t.idEstado),a.Ab(2),a.lc("ngIf",5!==t.idEstado)}}function h(t,e){if(1&t){const t=a.Sb();a.Rb(0,"div"),a.Rb(1,"div",43),a.Rb(2,"div",44),a.Rb(3,"div",3),a.Rb(4,"div",39),a.Rb(5,"h5",45),a.Jc(6),a.Qb(),a.Qb(),a.Rb(7,"div",35),a.Rb(8,"h5",45),a.Rb(9,"span",15),a.Jc(10),a.Qb(),a.Qb(),a.Qb(),a.Qb(),a.Rb(11,"div",3),a.Rb(12,"h6",46),a.Jc(13,"Evaluadores:"),a.Qb(),a.Qb(),a.Hc(14,l,7,2,"div",47),a.Qb(),a.Rb(15,"div",48),a.Rb(16,"a",49),a.bc("click",function(){a.Bc(t);const o=e.index;return a.dc().getArchivo(o)}),a.Nb(17,"i",41),a.Jc(18," Ver art\xedculo"),a.Qb(),a.Jc(19," \xa0 "),a.Rb(20,"a",49),a.bc("click",function(){a.Bc(t);const o=e.index;return a.dc().verDetalle(o)}),a.Nb(21,"i",50),a.Jc(22," Ver detalle"),a.Qb(),a.Hc(23,d,3,0,"a",51),a.Hc(24,v,9,3,"div",52),a.Qb(),a.Qb(),a.Qb()}if(2&t){const t=e.$implicit;a.Ab(6),a.Kc(t.nombre),a.Ab(3),a.Eb("bg-warning",5===t.idEstado)("text-dark",5===t.idEstado)("bg-success",6===t.idEstado||8===t.idEstado)("bg-danger",7===t.idEstado||9===t.idEstado),a.Ab(1),a.Kc(t.estado),a.Ab(4),a.lc("ngForOf",t.evaluaciones),a.Ab(9),a.lc("ngIf",!t.edit),a.Ab(1),a.lc("ngIf",t.edit)}}function f(t,e){if(1&t&&(a.Rb(0,"tr"),a.Rb(1,"td"),a.Jc(2),a.Qb(),a.Rb(3,"td"),a.Jc(4),a.Qb(),a.Rb(5,"td"),a.Jc(6),a.Qb(),a.Rb(7,"td"),a.Jc(8),a.Qb(),a.Qb()),2&t){const t=e.$implicit;a.Ab(2),a.Kc(t.aspecto),a.Ab(2),a.Kc(t.res1),a.Ab(2),a.Kc(t.res2),a.Ab(2),a.Kc(t.res3)}}function g(t,e){1&t&&(a.Rb(0,"option",68),a.Jc(1,"Aprobar"),a.Qb())}function m(t,e){1&t&&(a.Rb(0,"option",69),a.Jc(1,"Rechazar"),a.Qb())}function p(t,e){1&t&&(a.Rb(0,"option",70),a.Jc(1,"Necesita Reentrega"),a.Qb())}const E=[{path:"",component:(()=>{class t{constructor(t,e){this.paperService=t,this.evaluationService=e,this.edit=!1,this.articulos=[],this.vectorArticulos=[],this.detailed=!1,this.index=0,this.observacionAutor="",this.detalles=[],this.detNombreArticulo="",this.detEstado={id:0,nombre:""},this.detEvUno={id:0,nombre:"Evaluador 1"},this.detEvDos={id:0,nombre:"Evaluador 2"},this.detEvTres={id:0,nombre:"Evaluador 3"},this.puntuaciones=[{value:0,nombre:""},{value:1,nombre:"Muy D\xe9bil"},{value:2,nombre:"D\xe9bil"},{value:3,nombre:"Aceptable"},{value:4,nombre:"Bueno"},{value:5,nombre:"Muy bueno"}]}ngOnInit(){this.getArticulos()}evaluarDetalle(t){const e=document.getElementById("selectStateDetalle"),o=e.options[e.selectedIndex].value;if(""!==o){const e=parseInt(o,10);this.evaluar(t,e)}else document.getElementById("selectStateDetalle").classList.add("is-invalid")}evaluar(t,e){let o=this.vectorArticulos[t].idEstado,i=!1;o>=5&&(i=!0),1===e&&i?o=8:2===e&&i?o=9:1===e?o=6:2===e?o=7:3===e&&(o=5);const c=this.vectorArticulos[t].id,a=o,n=document.getElementById("observacion-autor");this.observacionAutor=n.value,this.articulos[t].observacion=n.value,this.vectorArticulos[t].observacion=n.value,this.paperService.calificarPaper(c,a,this.observacionAutor).subscribe(e=>{document.getElementById("selectStateDetalle").value="",this.setBadges(t,a),this.toggleEdit(t)})}setBadges(t,e){return 6===e?(this.vectorArticulos[t].idEstado=e,this.vectorArticulos[t].estado="Aprobado",this.detEstado.id=6,void(this.detEstado.nombre="Aprobado")):7===e?(this.vectorArticulos[t].idEstado=e,this.vectorArticulos[t].estado="Rechazado",this.detEstado.id=7,void(this.detEstado.nombre="Rechazado")):5===e?(this.vectorArticulos[t].idEstado=e,this.vectorArticulos[t].estado="Para Reentregar",this.detEstado.id=5,void(this.detEstado.nombre="Para Reentregar")):8===e?(this.vectorArticulos[t].idEstado=e,this.vectorArticulos[t].estado="Aprobado Reentrega",this.detEstado.id=8,void(this.detEstado.nombre="Aprobado Reentrega")):9===e?(this.vectorArticulos[t].idEstado=9,this.vectorArticulos[t].estado="Rechazado Reentrega",this.detEstado.id=9,void(this.detEstado.nombre="Rechazado Reentrega")):void 0}verDetalle(t){this.index=t,this.detEvUno.nombre="Evaluador 1",this.detEvDos.nombre="Evaluador 2",this.detEvTres.nombre="Evaluador 3";const e=this.vectorArticulos[t],o=e.evaluaciones;this.detNombreArticulo=e.nombre,document.getElementById("observacion-autor").value=e.observacion,this.observacionAutor=e.observacion,this.detEstado.id=e.idEstado,this.detEstado.nombre=e.estado,o.length>=1&&(this.detEvUno.id=o[0].idEvaluador,this.detEvUno.nombre=o[0].evaluador),o.length>=2&&(this.detEvDos.id=o[1].idEvaluador,this.detEvDos.nombre=o[1].evaluador),o.length>=3&&(this.detEvTres.id=o[2].idEvaluador,this.detEvTres.nombre=o[2].evaluador),this.evaluationService.getItemsEvaluacion(1).subscribe(o=>{const i=o.data;this.paperService.getEvaluationDetails(e.id).subscribe(e=>{let o,c,a;e.data.forEach(t=>{t.idEvaluador===this.detEvUno.id?o=t:t.idEvaluador===this.detEvDos.id?c=t:a=t});let n=null,r=null,l=null,d=null,s=null,b=null,u=null,v=null,h=null,f=null,g=null,m=null;for(let t=0;t<i.length;t++)n=void 0!==o&&void 0!==o.itemsEvaluados[t]?o.itemsEvaluados[t].calificacion:0,r=void 0!==c&&void 0!==c.itemsEvaluados[t]?c.itemsEvaluados[t].calificacion:0,l=void 0!==a&&void 0!==a.itemsEvaluados[t]?a.itemsEvaluados[t].calificacion:0,this.detalles.push({aspecto:i[t].nombre,res1:this.puntuaciones[n].nombre,res2:this.puntuaciones[r].nombre,res3:this.puntuaciones[l].nombre}),n=null,r=null,l=null;void 0!==this.vectorArticulos[t].evaluaciones[0]?(d=this.vectorArticulos[t].evaluaciones[0].recomendacion,u=this.vectorArticulos[t].evaluaciones[0].observacion,f=this.vectorArticulos[t].evaluaciones[0].observacionInterna):(d=null,u=null,f=null),void 0!==this.vectorArticulos[t].evaluaciones[1]?(s=this.vectorArticulos[t].evaluaciones[1].recomendacion,v=this.vectorArticulos[t].evaluaciones[1].observacion,g=this.vectorArticulos[t].evaluaciones[1].observacionInterna):(s=null,v=null,g=null),void 0!==this.vectorArticulos[t].evaluaciones[2]?(b=this.vectorArticulos[t].evaluaciones[2].recomendacion,h=this.vectorArticulos[t].evaluaciones[2].observacion,m=this.vectorArticulos[t].evaluaciones[2].observacionInterna):(b=null,h=null,m=null),this.detalles.push({aspecto:"Recomendaci\xf3n",res1:d,res2:s,res3:b}),this.detalles.push({aspecto:"Observaci\xf3n para el Autor",res1:u,res2:v,res3:h}),this.detalles.push({aspecto:"Observaci\xf3n Interna",res1:f,res2:g,res3:m})})}),document.getElementById("activar-modal").click()}getArchivo(t){this.paperService.getPaperFile(this.vectorArticulos[t].id).subscribe(t=>{const e=new Blob([t],{type:"application/pdf"}),o=window.URL.createObjectURL(e),i=document.createElement("a");void 0!==i.download&&(i.setAttribute("href",o),i.setAttribute("target","_blank"),i.style.visibility="hidden",document.body.appendChild(i),i.click(),document.body.removeChild(i))})}getArticulos(){this.articulos=[],this.paperService.getPapersXChair().subscribe(t=>{this.articulos=t.data[0].articulos,this.sortByState(),this.articulos=this.articulos.map(t=>({estado:t.estado,evaluaciones:t.evaluaciones,id:t.id,idCongreso:t.idCongreso,idEstado:t.idEstado,idSimposio:t.idSimposio,nombre:t.nombre,responsable:t.responsable,observacion:t.observacion,observacionInterna:t.observacionInterna,url:t.url,edit:!1})),this.vectorArticulos=this.articulos})}filter(t){if(this.vectorArticulos=[],0!==t)for(const e of this.articulos)e.idEstado===t&&this.vectorArticulos.push(e);else this.vectorArticulos=this.articulos}sortByState(){this.articulos.sort((t,e)=>t.idEstado>e.idEstado?1:t.idEstado<e.idEstado?-1:0)}modalOnClose(t){document.getElementById("selectStateDetalle").value="",document.getElementById("observacion-autor").value="",this.detalles=[],document.getElementById("selectStateDetalle").classList.remove("is-invalid"),this.vectorArticulos[t].edit=!1}toggleEdit(t){this.vectorArticulos[t].edit=!this.vectorArticulos[t].edit}}return t.\u0275fac=function(e){return new(e||t)(a.Mb(n.a),a.Mb(r.a))},t.\u0275cmp=a.Gb({type:t,selectors:[["app-evaluate-papers-chair-sec"]],decls:84,vars:19,consts:[[1,"container-fluid"],[1,"evaluation-cards"],[1,"card-title","text-center"],[1,"row"],[1,"col-auto","col-form-label"],["for","btn-group-filtros"],["id","btn-group-filtros","role","group",1,"btn-group","col-auto"],["type","button",1,"btn","btn-outline-primary",3,"click"],[4,"ngFor","ngForOf"],["hidden","","id","activar-modal","data-bs-toggle","modal","data-bs-target","#detallesModal"],["id","detallesModal","data-bs-backdrop","static","data-bs-keyboard","false","tabindex","-1","aria-labelledby","detallesModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-xl","modal-dialog-scrollable"],[1,"modal-content"],[1,"modal-header"],["id","detallesModalLabel",1,"modal-title"],[1,"badge","bg-primary"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"container"],[1,"table","table-hover","table-bordered"],[1,"text-center"],[1,"row","row-detalle","align-items-center"],[1,"col-md-3"],["for","selectStateDetalle",1,"col-form-label"],["id","spanEvaluacion"],[1,"col-md-4"],["id","selectStateDetalle",1,"form-select"],["disabled","","selected","","value",""],["value","1",4,"ngIf"],["value","2",4,"ngIf"],["value","3",4,"ngIf"],[1,"row","row-detalle"],["for","observacion-autor",1,"col-form-label"],[1,"col-md-8"],["id","observacion-autor",1,"form-control"],[1,"col-auto"],["id","btnGuardar",1,"btn","btn-outline-success",3,"click"],[1,"fa","fa-save","fa-lg"],[1,"modal-footer"],[1,"col-auto","me-auto"],[1,"btn","btn-primary","btn-border",3,"click"],[1,"fas","fa-file-pdf"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary","btn-border",3,"click"],[1,"card","col-md-6","offset-3"],[1,"card-body"],[1,"card-title"],["id","evaluadores",1,"card-subtitle","mb-2","text-muted"],["class","row ev-reco",4,"ngFor","ngForOf"],[1,"card-footer"],[1,"btn","card-footer-btn",3,"click"],[1,"fa","fa-search-plus"],["class","btn card-footer-btn","id","editar",3,"click",4,"ngIf"],["id","evaluation-select",4,"ngIf"],[1,"row","ev-reco"],[1,"col","col-md-3"],["id","nombreEvaluador"],[1,"card-text"],["id","editar",1,"btn","card-footer-btn",3,"click"],[1,"fa","fa-pencil"],["id","evaluation-select"],["class","btn btn-outline-success",3,"click",4,"ngIf"],["class","btn btn-outline-danger",3,"click",4,"ngIf"],["class","btn btn-outline-warning",3,"click",4,"ngIf"],["title","Cancelar",1,"btn","btn-outline-secondary",3,"click"],[1,"fas","fa-times","fa-lg"],[1,"btn","btn-outline-success",3,"click"],[1,"btn","btn-outline-danger",3,"click"],[1,"btn","btn-outline-warning",3,"click"],["value","1"],["value","2"],["value","3"]],template:function(t,e){1&t&&(a.Rb(0,"div",0),a.Rb(1,"div",1),a.Nb(2,"hr"),a.Rb(3,"h3",2),a.Jc(4,"Evaluaci\xf3n de Art\xedculos"),a.Qb(),a.Nb(5,"hr"),a.Qb(),a.Rb(6,"div",3),a.Rb(7,"div",4),a.Rb(8,"label",5),a.Jc(9,"Filtros"),a.Qb(),a.Qb(),a.Rb(10,"div",6),a.Rb(11,"button",7),a.bc("click",function(){return e.filter(0)}),a.Jc(12,"Todos"),a.Qb(),a.Rb(13,"button",7),a.bc("click",function(){return e.filter(4)}),a.Jc(14,"Pendiente"),a.Qb(),a.Rb(15,"button",7),a.bc("click",function(){return e.filter(6)}),a.Jc(16,"Aprobados"),a.Qb(),a.Rb(17,"button",7),a.bc("click",function(){return e.filter(7)}),a.Jc(18,"Rechazados"),a.Qb(),a.Rb(19,"button",7),a.bc("click",function(){return e.filter(5)}),a.Jc(20,"Reentrega"),a.Qb(),a.Rb(21,"button",7),a.bc("click",function(){return e.filter(8)}),a.Jc(22,"Aprobado Reentrega"),a.Qb(),a.Rb(23,"button",7),a.bc("click",function(){return e.filter(9)}),a.Jc(24,"Rechazado Reentrega"),a.Qb(),a.Qb(),a.Qb(),a.Hc(25,h,25,13,"div",8),a.Qb(),a.Nb(26,"button",9),a.Rb(27,"div",10),a.Rb(28,"div",11),a.Rb(29,"div",12),a.Rb(30,"div",13),a.Rb(31,"h5",14),a.Jc(32),a.Rb(33,"span",15),a.Jc(34),a.Qb(),a.Qb(),a.Rb(35,"button",16),a.bc("click",function(){return e.modalOnClose(e.index)}),a.Qb(),a.Qb(),a.Rb(36,"div",17),a.Rb(37,"div",18),a.Rb(38,"table",19),a.Rb(39,"thead",20),a.Rb(40,"tr"),a.Rb(41,"th"),a.Jc(42,"Aspecto"),a.Qb(),a.Rb(43,"th"),a.Jc(44),a.Qb(),a.Rb(45,"th"),a.Jc(46),a.Qb(),a.Rb(47,"th"),a.Jc(48),a.Qb(),a.Qb(),a.Qb(),a.Rb(49,"tbody",20),a.Hc(50,f,9,4,"tr",8),a.Qb(),a.Qb(),a.Rb(51,"div",21),a.Rb(52,"div",22),a.Rb(53,"label",23),a.Rb(54,"span",24),a.Jc(55,"Evaluaci\xf3n:"),a.Qb(),a.Qb(),a.Qb(),a.Rb(56,"div",25),a.Rb(57,"select",26),a.Nb(58,"option",27),a.Hc(59,g,2,0,"option",28),a.Hc(60,m,2,0,"option",29),a.Hc(61,p,2,0,"option",30),a.Qb(),a.Qb(),a.Qb(),a.Rb(62,"div",31),a.Rb(63,"div",22),a.Rb(64,"label",32),a.Rb(65,"span",24),a.Jc(66,"Observaci\xf3n para el Autor:"),a.Qb(),a.Qb(),a.Qb(),a.Rb(67,"div",33),a.Rb(68,"textarea",34),a.Jc(69),a.Qb(),a.Qb(),a.Qb(),a.Rb(70,"div",31),a.Nb(71,"div",22),a.Rb(72,"div",35),a.Rb(73,"a",36),a.bc("click",function(){return e.evaluarDetalle(e.index)}),a.Jc(74,"Guardar Evaluaci\xf3n "),a.Nb(75,"i",37),a.Qb(),a.Qb(),a.Qb(),a.Qb(),a.Qb(),a.Rb(76,"div",38),a.Rb(77,"div",39),a.Rb(78,"a",40),a.bc("click",function(){return e.getArchivo(e.index)}),a.Nb(79,"i",41),a.Jc(80," Ver art\xedculo"),a.Qb(),a.Qb(),a.Rb(81,"div",35),a.Rb(82,"button",42),a.bc("click",function(){return e.modalOnClose(e.index)}),a.Jc(83,"Cerrar"),a.Qb(),a.Qb(),a.Qb(),a.Qb(),a.Qb(),a.Qb()),2&t&&(a.Ab(25),a.lc("ngForOf",e.vectorArticulos),a.Ab(7),a.Lc(" ",e.detNombreArticulo," "),a.Ab(1),a.Eb("bg-warning",5===e.detEstado.id)("text-dark",5===e.detEstado.id)("bg-success",6===e.detEstado.id||8===e.detEstado.id)("bg-danger",7===e.detEstado.id||9===e.detEstado.id),a.Ab(1),a.Kc(e.detEstado.nombre),a.Ab(10),a.Kc(e.detEvUno.nombre),a.Ab(2),a.Kc(e.detEvDos.nombre),a.Ab(2),a.Kc(e.detEvTres.nombre),a.Ab(2),a.lc("ngForOf",e.detalles),a.Ab(9),a.lc("ngIf",6!==e.detEstado.id&&8!==e.detEstado.id),a.Ab(1),a.lc("ngIf",7!==e.detEstado.id&&9!==e.detEstado.id),a.Ab(1),a.lc("ngIf",5!==e.detEstado.id),a.Ab(8),a.Kc(e.observacionAutor))},directives:[i.n,i.o],styles:[".container-fluid[_ngcontent-%COMP%]{background-color:#f4f4f4}hr[_ngcontent-%COMP%]{border:1px solid #00609c}@media (min-width:768px){hr[_ngcontent-%COMP%]{margin-left:25%;margin-right:25%}.container-fluid[_ngcontent-%COMP%]{padding:5rem}}.ev-reco[_ngcontent-%COMP%]{margin-bottom:-15px}.evaluation-cards[_ngcontent-%COMP%]{padding-bottom:20px}.card[_ngcontent-%COMP%]{margin-top:20px}.card-footer[_ngcontent-%COMP%]{background-color:#fff}.modal-footer[_ngcontent-%COMP%], .modal-header[_ngcontent-%COMP%]{padding-left:29px;padding-right:29px}.row-detalle[_ngcontent-%COMP%]{margin-bottom:10px}.table[_ngcontent-%COMP%]{margin-top:30px}.btn-primary[_ngcontent-%COMP%]{background-color:#00609c;color:#fff;border-color:#0000}.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0080cf}.btn-border[_ngcontent-%COMP%]{border:none}.btn-outline-primary[_ngcontent-%COMP%]{border-color:#00609c;color:#00609c}.btn-outline-primary[_ngcontent-%COMP%]:hover{background-color:#00609c;border-color:#00609c;color:#fff}.card-footer-btn[_ngcontent-%COMP%]{color:#00609c;background:#0000;border:#0000}.card-footer-btn[_ngcontent-%COMP%]:hover{color:#3cafe0}#selectStateDetalle[_ngcontent-%COMP%]{float:left}#btnGuardar[_ngcontent-%COMP%]{float:right}#evaluadores[_ngcontent-%COMP%]{font-style:italic}#nombreEvaluador[_ngcontent-%COMP%]{font-weight:500}#responsable[_ngcontent-%COMP%]{font-style:italic}#editar[_ngcontent-%COMP%], #evaluation-select[_ngcontent-%COMP%]{float:right}#evaluation-select-detalle[_ngcontent-%COMP%]{white-space:nowrap}#spanEvaluacion[_ngcontent-%COMP%]{font-weight:500}"]}),t})()}];let R=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=a.Kb({type:t}),t.\u0275inj=a.Jb({imports:[[c.d.forChild(E)],c.d]}),t})();var A=o("pKmL"),Q=o("tk/3");let k=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=a.Kb({type:t}),t.\u0275inj=a.Jb({imports:[[i.c,R,A.a,Q.c]]}),t})()}}]);