(window.webpackJsonp=window.webpackJsonp||[]).push([[41],{Dafe:function(n,e,t){"use strict";t.r(e),t.d(e,"InscriptionsModule",function(){return f});var s=t("mrSG"),o=t("fXoL"),r=t("ofXK"),i=t("tyNb"),a=t("3Pt+"),c=t("5eHb"),l=t("VRfU"),d=t("by3J"),p=t("WPk3");let b=class{constructor(n,e,t,s,o,r,i){this.route=n,this.formBuilder=e,this.inscriptionService=t,this.router=s,this.toastr=o,this.congressService=r,this.tarifaService=i,this.idCongress="",this.tarifas=[],this.tarifaSelected=!1,this.datosCompletos=!1,this.loading=!1,this.idInscrip=null,this.submitted=!1,this.isLinear=!1}ngOnInit(){const n=window.location.href.split("/");this.idCongress=n[n.length-1],this.formUsuario=this.formBuilder.group({cupon:[""]}),this.getCongresos(),this.getTarifas()}getCongresos(){this.congressService.getCongressById().subscribe(n=>{const e=n.data[0].fechaInCongreso.split(" ")[0].split("/"),t=n.data[0].fechaFinCongreso.split(" ")[0].split("/"),s=new Date(e[2],e[1]-1,e[0]),o=new Date(t[2],t[1]-1,t[0]);this.congress={id:n.data[0].id,nombre:n.data[0].nombre,sede:n.data[0].nombre_sede,fechaInicio:s.toLocaleDateString(),fechaFin:o.toLocaleDateString()}})}getTarifas(){this.tarifaService.getTarifasActivas().subscribe(n=>{this.tarifas=n.data})}pagar(){this.inscriptionService.generatePreference(this.idInscrip).subscribe(n=>{this.loading=!0,window.location.href=n.init_point})}inscribirme(n){const e=this.formUsuario.controls.cupon.value;this.formUsuario.controls.cupon.setErrors(null),this.inscriptionService.inscribirme(e).subscribe(e=>{if(e.error)return this.toastr.warning("Error en la inscripci\xf3n. Usted ya se encuentra inscripto o el cup\xf3n ingresado es inv\xe1lido."),void this.formUsuario.controls.cupon.setErrors({incorrect:!0});this.idInscrip=e.data.id,this.tarifaSelected=Object.assign(Object.assign({},n),{precio:e.data.precioFinal});document.getElementById("go-next").click()})}datos(){this.datosCompletos=!1,this.formUsuario.invalid?this.toastr.warning("Por favor complete los datos"):this.datosCompletos=!0}};b.ctorParameters=()=>[{type:i.a},{type:a.a},{type:d.a},{type:i.b},{type:c.d},{type:l.a},{type:p.a}],b=Object(s.c)([Object(o.o)({selector:"app-inscriptions",template:'<div class="container-fluid">\n  <div class="contenidos">\n    <hr>\n    <h3 class=\'text-center\'>Inscripciones</h3>\n    <hr>\n  </div>\n  <div class="section" *ngIf="idCongress">\n    <h6>Usted est\xe1 a punto de inscribirse al congreso: {{congress.nombre}}\n      a desarrollarse en la sede {{congress.sede}}. Los d\xedas {{congress.fechaInicio}} a {{congress.fechaFin}}.\n    </h6>\n    <h6>\n      Por favor, complete todos los campos:\n    </h6>\n  </div>\n\n  <div class="accordion accordion-flush" id="accordionFlushExample">\n    <div class="accordion-item">\n      <h2 class="accordion-header" id="flush-headingOne">\n        <button class="accordion-button " type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseOne"\n          aria-expanded="true" aria-controls="flush-collapseOne">\n          Selecciona tu entrada\n        </button>\n      </h2>\n      <div id="flush-collapseOne" class="accordion-collapse collapse show" aria-labelledby="flush-headingOne"\n        data-bs-parent="#accordionFlushExample">\n        <div class="accordion-body row justify-content-center">\n          <div class="col-sm-6 text-center" *ngFor="let item of tarifas">\n            <div class="card text-left" [ngClass]=\'tarifaSelected.id === item.id ? "marked" : "" \'>\n              <div class="card-body">\n                <h4 class="card-title">{{item.nombre}}</h4>\n                <h6 class="card-text">$ {{item.precio}}</h6>\n\n                <form [formGroup]=\'formUsuario\'>\n                  <div class="form-group row">\n                    <label class="col-form-label col-sm-2 col-sm-offset-2" for="cupon">Tengo un cup\xf3n: <span\n                        class="text-danger">*</span></label>\n                    <div class="col-sm-6">\n                      <input type="text" class="form-control" formControlName="cupon" [ngClass]="{\'is-invalid\': formUsuario.controls.cupon.errors}" onclick="this.select()" />\n                      <span class="text-danger"\n                        *ngIf="formUsuario.controls.cupon.errors">\n                        Cup\xf3n inv\xe1lido.\n                      </span>\n                    </div>\n                  </div>\n\n                  <button type="button" (click)=\'inscribirme(item)\' class="btn btn-primary btn-lg btn-block">\n                    Inscribirme\n                  </button>\n                </form>\n                <button type="button" hidden class="btn btn-primary btn-lg btn-block" id=\'go-next\'\n                data-bs-toggle="collapse" data-bs-target="#flush-collapseThree" aria-expanded="false"\n                aria-controls="flush-collapseThree">\n                Inscribirme\n              </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class="accordion-item">\n      <h2 class="accordion-header" id="flush-headingThree">\n        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"\n          data-bs-target="#flush-collapseThree" aria-expanded="false" aria-controls="flush-collapseThree">\n          Realizar el Pago\n        </button>\n      </h2>\n      <div id="flush-collapseThree" class="accordion-collapse collapse" aria-labelledby="flush-headingThree"\n        data-bs-parent="#accordionFlushExample">\n        <div class="accordion-body" *ngIf="tarifaSelected">\n          <div class="row justify-content-center">\n            <div class="col-sm-6 ">\n              <div class="card">\n                <div class="card-body text-center">\n                  <h5 class="card-title">Estas a un paso de completar tu compra!</h5>\n                  <p class="card-text">\xbfEstas seguro que deseas la entrada "<b>{{tarifaSelected.nombre}}</b>"?</p>\n                  <p class="card-text">El precio de la entrada es de $<b>{{tarifaSelected.precio}}</b></p>\n                  <div class="row justify-items-end">\n                    <button type="button" class="btn btn-primary btn-lg btn-block"\n                    *ngIf="loading"\n                    >\n                    <div class="spinner-border text-primary" role="status">\n                      <span class="sr-only">Loading...</span>\n                    </div>\n                    </button>\n                    <button type="button" (click)=\'pagar()\' class="btn btn-primary btn-lg btn-block aling-items-end"\n                    *ngIf="!loading"\n                    >\n                      Continuar al pago\n                    </button>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n\n        </div>\n      </div>\n    </div>\n  </div>\n\n</div>\n',styles:['.container-fluid{\n  background-color: #F4F4F4;\n\n}\n\n.contenidos{\n  padding-bottom: 3rem;\n}\n\n.btn-primary{\n  background-color: #3CAFE0 ;\n  border: none;\n}\n\n.form-group{\n  padding-top: 0.75rem;\n  padding-bottom: 0.75rem;\n}\n\ni{\n  padding-top: 1.5rem;\n  cursor: pointer;\n}\n\ni:hover{\n  color: blue;\n}\n\n.fas{\n  font-size: 1.25rem;\n  color: #00609C;\n}\n\n.fa{\n  font-size: 1.25rem;\n  color: #00609C;\n}\n\nhr{\n  border:#00609C solid 1px;\n}\n\n.wrapper-progressBar {\n  width: 100%;\n}\n\n.progressBar {\n}\n\n.progressBar li {\n  list-style-type: none;\n  float: left;\n  width: 33%;\n  position: relative;\n  text-align: center;\n}\n\n.progressBar li:before {\n  content: "";\n  line-height: 30px;\n  border-radius: 50%;\n  width: 30px;\n  height: 30px;\n  border: 1px solid #ddd;\n  display: block;\n  text-align: center;\n  margin: 0 auto 10px;\n  background-color: white;\n}\n\n.progressBar li:after {\n  content: "";\n  position: absolute;\n  width: 100%;\n  height: 4px;\n  background-color: #ddd;\n  top: 15px;\n  left: -50%;\n  z-index: -1;\n}\n\n.progressBar li:first-child:after {\n  content: none;\n}\n\n.progressBar li.active {\n  color: #3CAFE0;\n}\n\n.progressBar li.active:before {\n  border-color: #3CAFE0;\n  background-color: #3CAFE0\n}\n\n.progressBar .active:after {\n  background-color: #3CAFE0;\n}\n\n.marked {\n  border-color: #00609C;\n  border-width: 0.5rem;\n}\n\na{\n  cursor: pointer;\n  text-decoration: none;\n  color: black;\n}\n\n@media (min-width: 768px) {\n  hr{\n    margin-left: 25%;\n    margin-right: 25%;\n\n  }\n\n  .container-fluid{\n    padding: 5rem;\n  }\n }\n\n.spinner-border{\n   padding: 1rem;\n }\n\n']})],b);const h=[{path:"",component:b}];let u=class{};u=Object(s.c)([Object(o.N)({imports:[i.c.forChild(h)],exports:[i.c]})],u);var g=t("pKmL");let f=class{};f=Object(s.c)([Object(o.N)({declarations:[b],imports:[r.c,u,g.a,a.f,a.b]})],f)}}]);
//# sourceMappingURL=41.js.map